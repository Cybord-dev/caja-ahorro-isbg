(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{"aBT+":function(i,e,o){"use strict";o.d(e,"a",(function(){return k}));var t=o("EwKM"),a=o("8Y7J"),n=o("SVse"),r=o("ESM5"),s=o("q+li"),b=o("iInd"),c=o("s7LF");function l(i,e){1&i&&(a.Pb(0,"div",26),a.vc(1," No se encontraron resultados "),a.Ob())}function u(i,e){1&i&&(a.Pb(0,"option",36),a.vc(1,"20"),a.Ob())}function d(i,e){1&i&&(a.Pb(0,"option",37),a.vc(1,"50"),a.Ob())}function f(i,e){if(1&i){const i=a.Qb();a.Pb(0,"select",32),a.Wb("ngModelChange",(function(e){return a.oc(i),a.Yb(2).filterParams.size=e}))("change",(function(e){return a.oc(i),a.Yb(2).onChangePageSize(e.target.value)})),a.Pb(1,"option",33),a.vc(2,"10"),a.Ob(),a.uc(3,u,2,0,"option",34),a.uc(4,d,2,0,"option",35),a.Ob()}if(2&i){const i=a.Yb(2);a.ec("ngModel",i.filterParams.size),a.xb(3),a.ec("ngIf",i.page.number<i.page.totalElements/20),a.xb(1),a.ec("ngIf",i.page.number<i.page.totalElements/50)}}function g(i,e){if(1&i){const i=a.Qb();a.Pb(0,"div",27),a.Pb(1,"button",28),a.Wb("click",(function(){return a.oc(i),a.Yb().downloadXLSFile()})),a.Kb(2,"i",29),a.Ob(),a.uc(3,f,5,3,"select",30),a.Pb(4,"strong",31),a.vc(5," Tama\xf1o Pagina \xa0\xa0\xa0\xa0"),a.Ob(),a.Ob()}if(2&i){const i=a.Yb();a.xb(3),a.ec("ngIf",0==i.page.last||1==i.page.first)}}function h(i,e){if(1&i){const i=a.Qb();a.Pb(0,"button",43),a.Wb("click",(function(){a.oc(i);const e=a.Yb().$implicit;return a.Yb(2).redirectToAdjustment(e.id)})),a.Kb(1,"i",47),a.Ob()}}function m(i,e){1&i&&(a.Pb(0,"td",42),a.Pb(1,"span",48),a.vc(2,"ACTIVO"),a.Ob(),a.Ob())}function p(i,e){1&i&&(a.Pb(0,"td",42),a.Pb(1,"span",49),a.vc(2,"INACTIVO"),a.Ob(),a.Ob())}function O(i,e){if(1&i){const i=a.Qb();a.Pb(0,"tr"),a.Pb(1,"td",42),a.Pb(2,"button",43),a.Wb("click",(function(){a.oc(i);const o=e.$implicit;return a.Yb(2).redirectToUser(o.id)})),a.Kb(3,"i",44),a.Ob(),a.uc(4,h,2,0,"button",45),a.Ob(),a.Pb(5,"td",42),a.vc(6),a.Ob(),a.Pb(7,"td",42),a.vc(8),a.Ob(),a.Pb(9,"td",42),a.vc(10),a.Ob(),a.Pb(11,"td",42),a.vc(12),a.Ob(),a.uc(13,m,3,0,"td",46),a.uc(14,p,3,0,"td",46),a.Ob()}if(2&i){const i=e.$implicit,o=a.Yb(2);a.xb(4),a.ec("ngIf","contabilidad"===o.module),a.xb(2),a.wc(i.noEmpleado),a.xb(2),a.wc(i.nombre),a.xb(2),a.wc(i.email),a.xb(2),a.wc(i.tipoUsuario),a.xb(1),a.ec("ngIf",!0===i.activo),a.xb(1),a.ec("ngIf",!1===i.activo)}}function v(i,e){if(1&i){const i=a.Qb();a.Pb(0,"li",55),a.Pb(1,"button",56),a.Wb("click",(function(){a.oc(i);const e=a.Yb(4);return e.updateDataTable(0,e.page.size)})),a.Kb(2,"i",57),a.Ob(),a.Ob()}}function P(i,e){if(1&i){const i=a.Qb();a.Pb(0,"li",55),a.Pb(1,"button",56),a.Wb("click",(function(){a.oc(i);const e=a.Yb(4);return e.updateDataTable(e.page.number-1,e.page.size)})),a.vc(2),a.Ob(),a.Ob()}if(2&i){const i=a.Yb(4);a.xb(2),a.wc(i.page.number)}}function I(i,e){if(1&i){const i=a.Qb();a.Pb(0,"li",55),a.Pb(1,"button",56),a.Wb("click",(function(){a.oc(i);const e=a.Yb(4);return e.updateDataTable(e.page.number+1,e.page.size)})),a.vc(2),a.Ob(),a.Ob()}if(2&i){const i=a.Yb(4);a.xb(2),a.wc(i.page.number+2)}}function C(i,e){if(1&i){const i=a.Qb();a.Pb(0,"li",55),a.Pb(1,"button",56),a.Wb("click",(function(){a.oc(i);const e=a.Yb(4);return e.updateDataTable(e.page.totalPages-1,e.page.size)})),a.Kb(2,"i",58),a.Ob(),a.Ob()}}function M(i,e){if(1&i&&(a.Pb(0,"ul",51),a.uc(1,v,3,0,"li",52),a.uc(2,P,3,1,"li",52),a.Pb(3,"li",53),a.Pb(4,"a",54),a.Pb(5,"strong"),a.vc(6),a.Ob(),a.Ob(),a.Ob(),a.uc(7,I,3,1,"li",52),a.uc(8,C,3,0,"li",52),a.Ob()),2&i){const i=a.Yb(3);a.xb(1),a.ec("ngIf",0==i.page.first),a.xb(1),a.ec("ngIf",0==i.page.first),a.xb(4),a.wc(i.page.number+1),a.xb(1),a.ec("ngIf",0==i.page.last),a.xb(1),a.ec("ngIf",0==i.page.last)}}function x(i,e){if(1&i&&(a.Pb(0,"div",27),a.uc(1,M,9,5,"ul",50),a.Ob()),2&i){const i=a.Yb(2);a.xb(1),a.ec("ngIf",i.page.totalElements>1)}}function U(i,e){if(1&i&&(a.Pb(0,"div",38),a.Pb(1,"table",39),a.Pb(2,"thead",40),a.Pb(3,"tr"),a.Pb(4,"th"),a.vc(5,"ACCIONES"),a.Ob(),a.Pb(6,"th"),a.vc(7,"NO. EMPLEADO"),a.Ob(),a.Pb(8,"th"),a.vc(9,"NOMBRE"),a.Ob(),a.Pb(10,"th"),a.vc(11,"CORREO"),a.Ob(),a.Pb(12,"th"),a.vc(13,"TIPO"),a.Ob(),a.Pb(14,"th"),a.vc(15,"STATUS"),a.Ob(),a.Ob(),a.Ob(),a.Pb(16,"tbody"),a.uc(17,O,15,7,"tr",41),a.Ob(),a.Ob(),a.uc(18,x,2,1,"div",24),a.Ob()),2&i){const i=a.Yb();a.xb(17),a.ec("ngForOf",i.page.content),a.xb(1),a.ec("ngIf",0==i.page.empty)}}let k=(()=>{class i{constructor(i,e,o,a){this.datepipe=i,this.userService=e,this.downloadService=o,this.router=a,this.module="recursos-humanos",this.page=new t.a,this.pageSize="10",this.filterParams={email:"",estatus:"*",nombre:"",tipoUsuario:"",page:"0",size:"10"}}ngOnInit(){this.module=this.router.url.split("/")[1],this.updateDataTable(0,10)}updateDataTable(i,e,o){this.filterParams.page=i||0,this.filterParams.size=e||10,this.userService.getUsuarios(this.filterParams).subscribe(i=>this.page=i)}onChangePageSize(i){this.updateDataTable(this.page.number,i)}redirectToUser(i){this.router.navigate([`../${this.module}/usuarios/${i}`])}redirectToAdjustment(i){this.router.navigate(["../contabilidad/ajustes/"+i])}downloadXLSFile(){this.filterParams.page="0",this.filterParams.size="100000",this.userService.getUsuariosReport(this.filterParams).subscribe(i=>{this.downloadService.downloadFile(i.dato,`ReporteUsuarios-${this.datepipe.transform(Date.now(),"yyyy-MM-dd")}.xls`,"application/vnd.ms-excel")})}}return i.\u0275fac=function(e){return new(e||i)(a.Jb(n.f),a.Jb(r.a),a.Jb(s.a),a.Jb(b.c))},i.\u0275cmp=a.Db({type:i,selectors:[["cybord-usuarios"]],decls:54,vars:10,consts:[[1,"animated","fadeIn"],[1,"row"],[1,"col-sm-12","col-md-12"],[1,"card"],[1,"card-header"],[1,"card-body"],[1,"row","slide_1"],[1,"col-md-2"],["for","inputCorreo",1,"label"],["type","text","nbInput","","fullWidth","","id","inputCorreo","placeholder","email usuario",1,"form-control",3,"ngModel","disabled","ngModelChange"],["for","nombreusuario",1,"label"],["type","text","nbInput","","fullWidth","","id","nombreusu","placeholder","nombreusuario",1,"form-control",3,"ngModel","disabled","ngModelChange"],["for","inputtipo",1,"label"],["type","text","nbInput","","fullWidth","","id","inputtipo","placeholder","Tipo de usuario",1,"form-control",3,"ngModel","disabled","ngModelChange"],[1,"col-md-6"],["for","inputActivo",1,"label"],[1,"row","form-inline"],["id","inputActivo","fullWidth","",1,"form-control",2,"display","block",3,"ngModel","ngModelChange"],["value","*"],["value","1"],["value","0"],[1,"btn","btn-primary",3,"click"],[1,"col"],["class","alert alert-primary","role","alert",4,"ngIf"],["class","clearfix",4,"ngIf"],["class","table-responsive",4,"ngIf"],["role","alert",1,"alert","alert-primary"],[1,"clearfix"],[1,"btn-sm","btn-success","float-right",3,"click"],[1,"fa","fa-file-excel-o","fa-sm"],["id","inputunidad","style","display:block;width: 95px; margin-right: 15px;","class","float-right form-control form-control-sm",3,"ngModel","ngModelChange","change",4,"ngIf"],[1,"float-right"],["id","inputunidad",1,"float-right","form-control","form-control-sm",2,"display","block","width","95px","margin-right","15px",3,"ngModel","ngModelChange","change"],["value","10"],["value","20",4,"ngIf"],["value","50",4,"ngIf"],["value","20"],["value","50"],[1,"table-responsive"],[1,"table","table-bordered","table-sm"],[1,"thead-dark"],[4,"ngFor","ngForOf"],["scope","row"],[1,"btn-sm","btn-outline-primary",3,"click"],[1,"fa","fa-search","fa-sm"],["class","btn-sm btn-outline-primary",3,"click",4,"ngIf"],["scope","row",4,"ngIf"],[1,"fa","fa-money","fa-sm"],[1,"badge","badge-success"],[1,"badge","badge-danger"],["class","pagination float-right",4,"ngIf"],[1,"pagination","float-right"],["class","page-item",4,"ngIf"],[1,"page-item","active"],[1,"page-link"],[1,"page-item"],[1,"btn","page-link",3,"click"],[1,"icon-control-rewind","icons"],[1,"icon-control-forward","icons"]],template:function(i,e){1&i&&(a.Pb(0,"div",0),a.Pb(1,"div",1),a.Pb(2,"div",2),a.Pb(3,"div",3),a.Pb(4,"div",4),a.Pb(5,"strong"),a.vc(6,"Altas y bajas de usuarios - Filtros de busqueda"),a.Ob(),a.Ob(),a.Pb(7,"div",5),a.Pb(8,"div",6),a.Pb(9,"div",7),a.Pb(10,"label",8),a.vc(11,"Correo Usuario"),a.Ob(),a.Pb(12,"input",9),a.Wb("ngModelChange",(function(i){return e.filterParams.email=i})),a.Ob(),a.Ob(),a.Pb(13,"div",7),a.Pb(14,"label",10),a.vc(15,"Nombre Usuario"),a.Ob(),a.Pb(16,"input",11),a.Wb("ngModelChange",(function(i){return e.filterParams.nombre=i})),a.Ob(),a.Ob(),a.Pb(17,"div",7),a.Pb(18,"label",12),a.vc(19,"Tipo Usuario"),a.Ob(),a.Pb(20,"input",13),a.Wb("ngModelChange",(function(i){return e.filterParams.tipoUsuario=i})),a.Ob(),a.Ob(),a.Pb(21,"div",14),a.Pb(22,"label",15),a.vc(23,"Estado cliente"),a.Ob(),a.Pb(24,"div",16),a.Pb(25,"select",17),a.Wb("ngModelChange",(function(i){return e.filterParams.estatus=i})),a.Pb(26,"option",18),a.vc(27,"TODOS"),a.Ob(),a.Pb(28,"option",19),a.vc(29,"ACTIVO"),a.Ob(),a.Pb(30,"option",20),a.vc(31,"INACTIVO"),a.Ob(),a.Ob(),a.Pb(32,"p"),a.vc(33,"\xa0\xa0\xa0\xa0"),a.Ob(),a.Pb(34,"button",21),a.Wb("click",(function(){return e.updateDataTable(0,10)})),a.vc(35,"BUSCAR"),a.Ob(),a.Pb(36,"p"),a.vc(37,"\xa0\xa0\xa0\xa0"),a.Ob(),a.Pb(38,"button",21),a.Wb("click",(function(){return e.redirectToUser("*")})),a.vc(39,"NUEVO USUARIO"),a.Ob(),a.Ob(),a.Ob(),a.Ob(),a.Ob(),a.Ob(),a.Ob(),a.Ob(),a.Pb(40,"div",1),a.Pb(41,"div",2),a.Pb(42,"div",3),a.Pb(43,"div",4),a.Pb(44,"strong"),a.vc(45,"Resultados"),a.Ob(),a.Ob(),a.Pb(46,"div",5),a.Pb(47,"div",1),a.Pb(48,"div",22),a.uc(49,l,2,0,"div",23),a.uc(50,g,6,1,"div",24),a.Ob(),a.Ob(),a.Pb(51,"div",1),a.Pb(52,"div",22),a.uc(53,U,19,2,"div",25),a.Ob(),a.Ob(),a.Ob(),a.Ob(),a.Ob(),a.Ob(),a.Ob()),2&i&&(a.xb(12),a.ec("ngModel",e.filterParams.email)("disabled",e.filterParams.nombre.length>0),a.xb(4),a.ec("ngModel",e.filterParams.nombre)("disabled",e.filterParams.email.length>0),a.xb(4),a.ec("ngModel",e.filterParams.tipoUsuario)("disabled",e.filterParams.email.length>0),a.xb(5),a.ec("ngModel",e.filterParams.estatus),a.xb(24),a.ec("ngIf",!0===e.page.empty),a.xb(1),a.ec("ngIf",!1===e.page.empty),a.xb(3),a.ec("ngIf",0==e.page.empty))},directives:[c.b,c.i,c.l,c.q,c.m,c.s,n.m,n.l],styles:[""]}),i})()},uwdg:function(i,e,o){"use strict";o.d(e,"a",(function(){return w}));var t=o("mrSG"),a=o("s7LF");class n{constructor(i,e,o){this.tipoDato=i,this.dato=e,this.relevancia=o||0}}var r=o("KZhB");class s{constructor(i){this.nombre=i}}var b=o("8Y7J"),c=o("SVse"),l=o("iInd"),u=o("ESM5"),d=o("ienR"),f=o("LqlI");const g=["modalConfirmacion"];function h(i,e){if(1&i&&(b.Pb(0,"p"),b.vc(1),b.Ob()),2&i){const i=e.$implicit;b.xb(1),b.wc(i)}}function m(i,e){if(1&i&&(b.Pb(0,"div",74),b.uc(1,h,2,1,"p",75),b.Ob()),2&i){const i=b.Yb();b.xb(1),b.ec("ngForOf",i.errorMessages)}}function p(i,e){1&i&&(b.Pb(0,"div"),b.vc(1,"El alias es requerido."),b.Ob())}function O(i,e){1&i&&(b.Pb(0,"div"),b.vc(1,"Nececitas un minimo de 2 caracteres. "),b.Ob())}function v(i,e){1&i&&(b.Pb(0,"div"),b.vc(1,"No mas de 100 caracteres."),b.Ob())}function P(i,e){1&i&&(b.Pb(0,"div"),b.vc(1,"Hay caracteres invalidos."),b.Ob())}function I(i,e){if(1&i&&(b.Pb(0,"div",76),b.uc(1,p,2,0,"div",77),b.uc(2,O,2,0,"div",77),b.uc(3,v,2,0,"div",77),b.uc(4,P,2,0,"div",77),b.Ob()),2&i){const i=b.Yb();b.xb(1),b.ec("ngIf",i.f.alias.errors.required),b.xb(1),b.ec("ngIf",i.f.alias.errors.minlength),b.xb(1),b.ec("ngIf",i.f.alias.errors.maxlength),b.xb(1),b.ec("ngIf",i.f.alias.errors.pattern)}}function C(i,e){1&i&&(b.Pb(0,"div"),b.vc(1,"El correo es requerido."),b.Ob())}function M(i,e){1&i&&(b.Pb(0,"div"),b.vc(1,"La direccion introducida no es valida. "),b.Ob())}function x(i,e){1&i&&(b.Pb(0,"div"),b.vc(1,"Hay caracteres invalidos."),b.Ob())}function U(i,e){if(1&i&&(b.Pb(0,"div",76),b.uc(1,C,2,0,"div",77),b.uc(2,M,2,0,"div",77),b.uc(3,x,2,0,"div",77),b.Ob()),2&i){const i=b.Yb();b.xb(1),b.ec("ngIf",i.f.email.errors.required),b.xb(1),b.ec("ngIf",i.f.email.errors.email),b.xb(1),b.ec("ngIf",i.f.email.errors.pattern)}}function k(i,e){if(1&i&&(b.Pb(0,"p",78),b.vc(1),b.Ob()),2&i){const i=b.Yb();b.xb(1),b.wc(i.params.success)}}function N(i,e){1&i&&b.Kb(0,"i",81)}function A(i,e){if(1&i){const i=b.Qb();b.Pb(0,"button",79),b.Wb("click",(function(){return b.oc(i),b.Yb().openModal()})),b.vc(1," Registrar "),b.uc(2,N,1,0,"i",80),b.Ob()}if(2&i){const i=b.Yb();b.ec("disabled",i.loading),b.xb(2),b.ec("ngIf",i.loading)}}function y(i,e){1&i&&b.Kb(0,"i",81)}function E(i,e){if(1&i){const i=b.Qb();b.Pb(0,"button",79),b.Wb("click",(function(){return b.oc(i),b.Yb().openModal()})),b.vc(1," Actualizar "),b.uc(2,y,1,0,"i",80),b.Ob()}if(2&i){const i=b.Yb();b.ec("disabled",i.loading),b.xb(2),b.ec("ngIf",i.loading)}}function S(i,e){if(1&i){const i=b.Qb();b.Pb(0,"button",82),b.Wb("click",(function(){return b.oc(i),b.Yb().update()})),b.vc(1,"Si"),b.Ob()}}function T(i,e){if(1&i){const i=b.Qb();b.Pb(0,"button",82),b.Wb("click",(function(){return b.oc(i),b.Yb().register()})),b.vc(1,"Si"),b.Ob()}}const R=function(i){return{"is-invalid":i}};let w=(()=>{class i{constructor(i,e,o,t,a){this.datepipe=i,this.route=e,this.usuarioServicio=o,this.formBuilder=t,this.router=a,this.submitted=!1,this.loading=!1,this.usuario=new r.a,this.errorMessages=[],this.mensajeModal="",this.params={success:"",message:"",id:"*",module:"usuarios",interno:!1},this.roles={USUARIO:!0,RECURSOS_HUMANOS:!1,TESORERIA:!1,CONTABILIDAD:!1,GERENCIA:!1,ADMINISTRACION:!1,DIRECCION:!1},this.nombreRoles=Object.keys(this.roles)}ngOnInit(){this.loading=!0,this.errorMessages=[],this.params.module=this.router.url.split("/")[1],this.antiguedad=new Date,this.route.paramMap.subscribe(i=>{const e=i.get("idUsuario");"*"!==e?(this.updateUserInfo(+e),this.registerForm=this.formBuilder.group({email:[{value:this.usuario.email,disabled:!0}],alias:["",[a.r.required,a.r.maxLength(100),a.r.minLength(2),a.r.pattern("^([0-9a-zA-Z\xc0-\xfa.,&-_!\xa1\" ' ]+)$")]],activo:["Si",a.r.required],tipo:[this.usuario.tipoUsuario],oficina:[this.usuario.datosUsuario.OFICINA],banco:[this.usuario.datosUsuario.BANCO],noEmpleado:[this.usuario.noEmpleado],cuenta:[this.usuario.datosUsuario.CUENTA],sueldo:[this.usuario.datosUsuario.SUELDO],antiguedad:[this.usuario.datosUsuario.ANTIGUEDAD]})):(this.antiguedad=new Date,this.registerForm=this.formBuilder.group({email:[{value:this.usuario.email,disabled:!1},[a.r.required,a.r.email,a.r.pattern("^[a-z0-9A-Z._%+-]+@[a-z0-9.-]+\\.[a-z]{2,4}$")]],alias:["",[a.r.required,a.r.maxLength(100),a.r.minLength(2),a.r.pattern("^([0-9a-zA-Z\xc0-\xfa.,&-_!\xa1\"' ]+)$")]],activo:["Si",a.r.required],tipo:[this.usuario.tipoUsuario],oficina:[this.usuario.datosUsuario.OFICINA],banco:[this.usuario.datosUsuario.BANCO],noEmpleado:[this.usuario.noEmpleado],cuenta:[this.usuario.datosUsuario.CUENTA],sueldo:[this.usuario.datosUsuario.SUELDO],antiguedad:[this.usuario.datosUsuario.ANTIGUEDAD]}),this.loading=!1)})}updateUserInfo(i){this.errorMessages=[],this.usuarioServicio.getUsuario(i).toPromise().then(i=>{this.usuario=i,this.loading=!1,this.antiguedad=new Date(i.datosUsuario.ANTIGUEDAD);for(const e of i.roles)this.roles[e]=!0}).catch(i=>this.errorMessages.push(i))}toggleUserType(){this.usuario.tipoUsuario="INTERNO"===this.usuario.tipoUsuario?"EXTERNO":"INTERNO"}openModal(){this.mensajeModal=void 0!==this.usuario.id?"\xbfActualizar usuario?":"\xbfRegistrar usuario?",this.modalConfirmacion.show()}decline(){this.modalConfirmacion.hide()}get f(){return this.registerForm.controls}update(){this.loading=!0,console.log(this.usuario.noEmpleado),this.modalConfirmacion.hide(),this.errorMessages=[],this.usuarioServicio.actualizaUser(this.usuario).toPromise().then(i=>Object(t.a)(this,void 0,void 0,(function*(){void 0!==this.usuario.datosUsuario.ANTIGUEDAD&&(this.usuario.datosUsuario.ANTIGUEDAD=this.datepipe.transform(this.antiguedad,"yyyy-MM-dd"));for(const o in this.usuario.datosUsuario)if(void 0!==o&&void 0!==this.usuario.datosUsuario[o]&&""!==this.usuario.datosUsuario[o]&&null!==this.usuario.datosUsuario[o]&&i.datosUsuario[o]!==this.usuario.datosUsuario[o]){const i=new n(o,this.usuario.datosUsuario[o]);yield this.usuarioServicio.actualizaDatoUsuario(this.usuario.id,o,i).toPromise()}if("administracion"===this.params.module){console.log("Updating user roles");var e=0;for(const i in this.roles)!1===this.roles[i]&&this.usuario.roles.find(e=>e===i)&&(yield this.usuarioServicio.deleteRoles(this.usuario.id,this.nombreRoles[e]).toPromise()),e++;for(const i in this.roles)!0!==this.roles[i]||this.usuario.roles.find(e=>e===i)||(yield this.usuarioServicio.insertarRoles(this.usuario.id,new s(i)).toPromise())}this.submitted=!0,this.params.success="El usuario ha sido actualizado satisfactoriamente."}))).then(()=>this.router.navigate([`../${this.params.module}/usuarios`])).catch(i=>{this.errorMessages.push(i),this.loading=!1})}register(){let i=0;console.log("registering",this.registerForm.invalid),this.loading=!0,this.modalConfirmacion.hide(),this.errorMessages=[],console.log("registering"),this.usuario.datosUsuario.ANTIGUEDAD=this.datepipe.transform(this.antiguedad,"yyyy-MM-dd"),this.usuarioServicio.insertarUsuario(this.usuario).toPromise().then(e=>Object(t.a)(this,void 0,void 0,(function*(){i=e.id;for(const i in this.usuario.datosUsuario)if(void 0!==i&&void 0!==this.usuario.datosUsuario[i]){const o=this.usuario.datosUsuario[i];yield this.usuarioServicio.insertarDatoUsuario(e.id,new n(i,o)).toPromise()}for(const i in this.roles)!0===this.roles[i]&&(yield this.usuarioServicio.insertarRoles(e.id,new s(i)).toPromise());this.submitted=!0}))).then(()=>this.router.navigate([`../${this.params.module}/usuarios`])).catch(i=>{this.errorMessages.push(i),this.loading=!1})}updateRoles(){return Object(t.a)(this,void 0,void 0,(function*(){for(const i in this.roles)!1===this.roles[i]&&this.usuario.roles.find(e=>e===i)&&(yield this.usuarioServicio.deleteRoles(this.usuario.id,this.roles[i]).toPromise());for(const i in this.roles)!0!==this.roles[i]||this.usuario.roles.find(e=>e===i)||(yield this.usuarioServicio.insertarRoles(this.usuario.id,new s(i)).toPromise())}))}clearInput(){this.usuario=new r.a,this.params.success="",this.errorMessages=[],this.submitted=!1}}return i.\u0275fac=function(e){return new(e||i)(b.Jb(c.f),b.Jb(l.a),b.Jb(u.a),b.Jb(a.c),b.Jb(l.c))},i.\u0275cmp=b.Db({type:i,selectors:[["cybord-usuario"]],viewQuery:function(i,e){var o;1&i&&b.Ac(g,!0),2&i&&b.lc(o=b.Xb())&&(e.modalConfirmacion=o.first)},decls:151,vars:42,consts:[[1,"animated","fadeIn"],[1,"row"],[1,"col-sm-12","col-md-12"],[1,"card"],[1,"card-header"],[1,"card-body"],["class","alert alert-warning","role","alert",4,"ngIf"],[1,"col-xs-12","col-sm-12","col-md-8"],[3,"formGroup"],[1,"form-group","row"],[1,"col-md-3","col-form-label"],[1,"col-md-9"],["type","text","formControlName","alias","placeholder","Sobrenombre o alias",1,"form-control",3,"ngClass","ngModel","ngModelChange"],["class","invalid-feedback",4,"ngIf"],["type","text","formControlName","email","placeholder","Correo Electronico",1,"form-control",3,"ngClass","ngModel","ngModelChange"],[1,"col-md-7"],[1,"switch","switch-label","switch-primary"],["type","checkbox","formControlName","activo",1,"switch-input",3,"checked","ngModel","ngModelChange"],["data-checked","ON","data-unchecked","OFF",1,"switch-slider"],[1,"col-md-7","col-form-label"],[1,"form-check"],["formControlName","tipo","type","radio","name","tipo","id","radio3","value","INTERNO",1,"form-check-input",3,"checked","click"],["for","radio3",1,"form-check-label"],["formControlName","tipo","type","radio","name","tipo","id","radio4","value","EXTERNO",1,"form-check-input",3,"checked","click"],["for","radio4",1,"form-check-label"],["type","text","id","no-emp","name","text-inputa","formControlName","noEmpleado","placeholder","No empleado",1,"form-control",3,"ngModel","ngModelChange"],["id","office","name","office","formControlName","oficina",1,"form-control",3,"ngModel","ngModelChange"],["value","*"],["value","1"],["value","2"],["value","3"],["value","4"],["id","bank","name","bank","formControlName","banco",1,"form-control",3,"ngModel","ngModelChange"],["value","91"],["value","92"],["value","93"],["value","94"],["type","text","id","no-account","name","account","formControlName","cuenta","placeholder","0000 0000 0000 0000",1,"form-control",3,"ngModel","ngModelChange"],["type","number","id","quantity","name","text-inputafg","formControlName","sueldo","min","1","placeholder","1.00",1,"form-control",3,"ngModel","ngModelChange"],["id","start-date","type","text","formControlName","antiguedad","bsDatepicker","",1,"form-control",3,"bsValue","bsValueChange"],["dp","bsDatepicker"],[1,"col-xs-12","col-sm-12","col-md-4"],[1,"col-md-9","col-form-label"],["type","checkbox","value","option1","id","checkbox1",1,"form-check-input",3,"ngModel","disabled","ngModelChange"],["for","checkbox1",1,"form-check-label"],["type","checkbox","value","option1","id","checkbox2",1,"form-check-input",3,"ngModel","disabled","ngModelChange"],["for","checkbox2",1,"form-check-label"],[1,"form-check","checkbox"],["type","checkbox","value","option1","id","checkbox3",1,"form-check-input",3,"ngModel","disabled","ngModelChange"],["for","checkbox3",1,"form-check-label"],["type","checkbox","value","option1","id","checkbox4",1,"form-check-input",3,"ngModel","disabled","ngModelChange"],["for","checkbox4",1,"form-check-label"],["type","checkbox","value","option1","id","checkbox5",1,"form-check-input",3,"ngModel","disabled","ngModelChange"],["for","checkbox5",1,"form-check-label"],["type","checkbox","value","option1","id","checkbox7",1,"form-check-input",3,"ngModel","disabled","ngModelChange"],["for","checkbox7",1,"form-check-label"],["type","checkbox","value","option1","id","checkbox6",1,"form-check-input",3,"ngModel","disabled","ngModelChange"],["for","checkbox6",1,"form-check-label"],["class","alert alert-success","role","alert",4,"ngIf"],[1,"card-footer"],[1,"float-right","slide_2"],["class","btn btn-primary",3,"disabled","click",4,"ngIf"],["bsModal","","id","modalConfirmacion","tabindex","-1","role","dialog","aria-labelledby","modalConfirmacion","aria-hidden","true",1,"modal","fade"],["modalConfirmacion","bs-modal"],["role","document",1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],["id","modalConfirmacionLabel",1,"modal-title"],["type","button","data-dismiss","modal","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"modal-footer"],["type","button","class","btn btn-primary",3,"click",4,"ngIf"],["type","button",1,"btn","btn-secondary",3,"click"],["role","alert",1,"alert","alert-warning"],[4,"ngFor","ngForOf"],[1,"invalid-feedback"],[4,"ngIf"],["role","alert",1,"alert","alert-success"],[1,"btn","btn-primary",3,"disabled","click"],["class","fa fa-spinner fa-spin",4,"ngIf"],[1,"fa","fa-spinner","fa-spin"],["type","button",1,"btn","btn-primary",3,"click"]],template:function(i,e){1&i&&(b.Pb(0,"div",0),b.Pb(1,"div",1),b.Pb(2,"div",2),b.Pb(3,"div",3),b.Pb(4,"div",4),b.Pb(5,"strong"),b.vc(6,"Usuarios"),b.Ob(),b.Ob(),b.Pb(7,"div",5),b.uc(8,m,2,1,"div",6),b.Pb(9,"div",1),b.Pb(10,"div",7),b.Pb(11,"form",8),b.Pb(12,"div",9),b.Pb(13,"strong",10),b.vc(14,"Nombre"),b.Ob(),b.Pb(15,"div",11),b.Pb(16,"input",12),b.Wb("ngModelChange",(function(i){return e.usuario.nombre=i})),b.Ob(),b.uc(17,I,5,4,"div",13),b.Ob(),b.Ob(),b.Pb(18,"div",9),b.Pb(19,"strong",10),b.vc(20,"Email"),b.Ob(),b.Pb(21,"div",11),b.Pb(22,"input",14),b.Wb("ngModelChange",(function(i){return e.usuario.email=i})),b.Ob(),b.uc(23,U,4,3,"div",13),b.Ob(),b.Ob(),b.Pb(24,"div",9),b.Pb(25,"strong",10),b.vc(26,"Usuario activo"),b.Ob(),b.Pb(27,"div",15),b.Pb(28,"label",16),b.Pb(29,"input",17),b.Wb("ngModelChange",(function(i){return e.usuario.activo=i})),b.Ob(),b.Kb(30,"span",18),b.Ob(),b.Ob(),b.Ob(),b.Pb(31,"div",9),b.Pb(32,"strong",10),b.vc(33,"Tipo Usuario"),b.Ob(),b.Pb(34,"div",19),b.Pb(35,"div",20),b.Pb(36,"input",21),b.Wb("click",(function(){return e.toggleUserType()})),b.Ob(),b.Pb(37,"label",22),b.vc(38," INTERNO "),b.Ob(),b.Ob(),b.Pb(39,"div",20),b.Pb(40,"input",23),b.Wb("click",(function(){return e.toggleUserType()})),b.Ob(),b.Pb(41,"label",24),b.vc(42," EXTERNO "),b.Ob(),b.Ob(),b.Ob(),b.Ob(),b.Pb(43,"div",9),b.Pb(44,"strong",10),b.vc(45,"No. Empleado"),b.Ob(),b.Pb(46,"div",11),b.Pb(47,"input",25),b.Wb("ngModelChange",(function(i){return e.usuario.noEmpleado=i})),b.Ob(),b.Ob(),b.Ob(),b.Pb(48,"div",9),b.Pb(49,"strong",10),b.vc(50,"Oficina"),b.Ob(),b.Pb(51,"div",15),b.Pb(52,"select",26),b.Wb("ngModelChange",(function(i){return e.usuario.datosUsuario.OFICINA=i})),b.Pb(53,"option",27),b.vc(54,"Seleccionar"),b.Ob(),b.Pb(55,"option",28),b.vc(56,"Oficina #1"),b.Ob(),b.Pb(57,"option",29),b.vc(58,"Oficina #2"),b.Ob(),b.Pb(59,"option",30),b.vc(60,"Oficina #3"),b.Ob(),b.Pb(61,"option",31),b.vc(62,"Oficina #4"),b.Ob(),b.Ob(),b.Ob(),b.Ob(),b.Pb(63,"div",9),b.Pb(64,"strong",10),b.vc(65,"BANCO"),b.Ob(),b.Pb(66,"div",15),b.Pb(67,"select",32),b.Wb("ngModelChange",(function(i){return e.usuario.datosUsuario.BANCO=i})),b.Pb(68,"option",27),b.vc(69,"Seleccionar"),b.Ob(),b.Pb(70,"option",33),b.vc(71,"HSBC"),b.Ob(),b.Pb(72,"option",34),b.vc(73,"BBVA"),b.Ob(),b.Pb(74,"option",35),b.vc(75,"CITYBANAMEX"),b.Ob(),b.Pb(76,"option",36),b.vc(77,"SCOTIA BANK"),b.Ob(),b.Ob(),b.Ob(),b.Ob(),b.Pb(78,"div",9),b.Pb(79,"strong",10),b.vc(80,"No. Cuenta"),b.Ob(),b.Pb(81,"div",11),b.Pb(82,"input",37),b.Wb("ngModelChange",(function(i){return e.usuario.datosUsuario.CUENTA=i})),b.Ob(),b.Ob(),b.Ob(),b.Pb(83,"div",9),b.Pb(84,"strong",10),b.vc(85,"Sueldo"),b.Ob(),b.Pb(86,"div",15),b.Pb(87,"input",38),b.Wb("ngModelChange",(function(i){return e.usuario.datosUsuario.SUELDO=i})),b.Ob(),b.Ob(),b.Ob(),b.Pb(88,"div",9),b.Pb(89,"strong",10),b.vc(90,"Fecha Antiguiedad"),b.Ob(),b.Pb(91,"div",15),b.Pb(92,"input",39,40),b.Wb("bsValueChange",(function(i){return e.antiguedad=i})),b.Ob(),b.Ob(),b.Ob(),b.Ob(),b.Ob(),b.Pb(94,"div",41),b.Pb(95,"div",9),b.Pb(96,"label",10),b.Pb(97,"strong"),b.vc(98,"Roles"),b.Ob(),b.Ob(),b.Pb(99,"div",42),b.Pb(100,"div",20),b.Pb(101,"input",43),b.Wb("ngModelChange",(function(i){return e.roles.USUARIO=i})),b.Ob(),b.Pb(102,"label",44),b.vc(103," USUARIO "),b.Ob(),b.Ob(),b.Pb(104,"div",20),b.Pb(105,"input",45),b.Wb("ngModelChange",(function(i){return e.roles.RECURSOS_HUMANOS=i})),b.Ob(),b.Pb(106,"label",46),b.vc(107," RECURSOS HUMANOS "),b.Ob(),b.Ob(),b.Pb(108,"div",47),b.Pb(109,"input",48),b.Wb("ngModelChange",(function(i){return e.roles.CONTABILIDAD=i})),b.Ob(),b.Pb(110,"label",49),b.vc(111," CONTABILIDAD "),b.Ob(),b.Ob(),b.Pb(112,"div",47),b.Pb(113,"input",50),b.Wb("ngModelChange",(function(i){return e.roles.TESORERIA=i})),b.Ob(),b.Pb(114,"label",51),b.vc(115," TESORERIA "),b.Ob(),b.Ob(),b.Pb(116,"div",47),b.Pb(117,"input",52),b.Wb("ngModelChange",(function(i){return e.roles.GERENCIA=i})),b.Ob(),b.Pb(118,"label",53),b.vc(119," GERENCIA "),b.Ob(),b.Ob(),b.Pb(120,"div",47),b.Pb(121,"input",54),b.Wb("ngModelChange",(function(i){return e.roles.DIRECCION=i})),b.Ob(),b.Pb(122,"label",55),b.vc(123," DIRECCION "),b.Ob(),b.Ob(),b.Pb(124,"div",47),b.Pb(125,"input",56),b.Wb("ngModelChange",(function(i){return e.roles.ADMINISTRACION=i})),b.Ob(),b.Pb(126,"label",57),b.vc(127," ADMINISTRACION "),b.Ob(),b.Ob(),b.Ob(),b.Ob(),b.Ob(),b.Ob(),b.Kb(128,"br"),b.uc(129,k,2,1,"p",58),b.Ob(),b.Pb(130,"div",59),b.Pb(131,"div",60),b.uc(132,A,3,2,"button",61),b.uc(133,E,3,2,"button",61),b.Ob(),b.Ob(),b.Ob(),b.Ob(),b.Ob(),b.Ob(),b.Pb(134,"div",62,63),b.Pb(136,"div",64),b.Pb(137,"div",65),b.Pb(138,"div",66),b.Pb(139,"h5",67),b.vc(140,"Confirmacion"),b.Ob(),b.Pb(141,"button",68),b.Wb("click",(function(){return e.decline()})),b.Pb(142,"span",69),b.vc(143,"\xd7"),b.Ob(),b.Ob(),b.Ob(),b.Pb(144,"div",70),b.vc(145),b.Ob(),b.Pb(146,"div",71),b.uc(147,S,2,0,"button",72),b.uc(148,T,2,0,"button",72),b.Pb(149,"button",73),b.Wb("click",(function(){return e.decline()})),b.vc(150,"no"),b.Ob(),b.Ob(),b.Ob(),b.Ob(),b.Ob()),2&i&&(b.xb(8),b.ec("ngIf",e.errorMessages.length>0),b.xb(3),b.ec("formGroup",e.registerForm),b.xb(5),b.ec("ngClass",b.hc(38,R,e.submitted&&e.f.alias.errors))("ngModel",e.usuario.nombre),b.xb(1),b.ec("ngIf",e.submitted&&e.f.alias.errors),b.xb(5),b.ec("ngClass",b.hc(40,R,e.submitted&&e.f.email.errors))("ngModel",e.usuario.email),b.xb(1),b.ec("ngIf",e.submitted&&e.f.email.errors),b.xb(6),b.ec("checked",e.usuario.activo)("ngModel",e.usuario.activo),b.xb(7),b.ec("checked","INTERNO"===e.usuario.tipoUsuario),b.xb(4),b.ec("checked","EXTERNO"===e.usuario.tipoUsuario),b.xb(7),b.ec("ngModel",e.usuario.noEmpleado),b.xb(5),b.ec("ngModel",e.usuario.datosUsuario.OFICINA),b.xb(15),b.ec("ngModel",e.usuario.datosUsuario.BANCO),b.xb(15),b.ec("ngModel",e.usuario.datosUsuario.CUENTA),b.xb(5),b.ec("ngModel",e.usuario.datosUsuario.SUELDO),b.xb(5),b.ec("bsValue",e.antiguedad),b.xb(9),b.ec("ngModel",e.roles.USUARIO)("disabled","administracion"!==e.params.module),b.xb(4),b.ec("ngModel",e.roles.RECURSOS_HUMANOS)("disabled","administracion"!==e.params.module),b.xb(4),b.ec("ngModel",e.roles.CONTABILIDAD)("disabled","administracion"!==e.params.module),b.xb(4),b.ec("ngModel",e.roles.TESORERIA)("disabled","administracion"!==e.params.module),b.xb(4),b.ec("ngModel",e.roles.GERENCIA)("disabled","administracion"!==e.params.module),b.xb(4),b.ec("ngModel",e.roles.DIRECCION)("disabled","administracion"!==e.params.module),b.xb(4),b.ec("ngModel",e.roles.ADMINISTRACION)("disabled","administracion"!==e.params.module),b.xb(4),b.ec("ngIf",e.params.success.length>0),b.xb(3),b.ec("ngIf",void 0===e.usuario.id),b.xb(1),b.ec("ngIf",void 0!==e.usuario.id),b.xb(12),b.xc(" ",e.mensajeModal," "),b.xb(2),b.ec("ngIf",void 0!==e.usuario.id),b.xb(1),b.ec("ngIf",void 0===e.usuario.id))},directives:[c.m,a.t,a.j,a.e,a.b,a.i,a.d,c.k,a.a,a.o,a.q,a.m,a.s,a.n,d.b,d.a,a.l,f.a,c.l],styles:[""]}),i})()}}]);