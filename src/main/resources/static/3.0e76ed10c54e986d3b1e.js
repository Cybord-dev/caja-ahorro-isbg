(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{"aBT+":function(o,i,e){"use strict";e.d(i,"a",(function(){return A}));var t=e("EwKM"),a=e("8Y7J"),n=e("SVse"),s=e("ESM5"),c=e("q+li"),r=e("iInd"),b=e("s7LF"),l=e("jksu");function d(o,i){if(1&o){const o=a.Yb();a.Xb(0,"div",7),a.Xb(1,"label",29),a.Dc(2,"Tipo de Usuario"),a.Wb(),a.Xb(3,"div"),a.Xb(4,"select",30),a.ec("ngModelChange",(function(i){return a.wc(o),a.gc().filterParams.tipoUsuario=i})),a.Xb(5,"option",18),a.Dc(6,"TODOS"),a.Wb(),a.Xb(7,"option",31),a.Dc(8,"INTERNO"),a.Wb(),a.Xb(9,"option",32),a.Dc(10,"EXTERNO"),a.Wb(),a.Wb(),a.Wb(),a.Wb()}if(2&o){const o=a.gc();a.Fb(4),a.mc("ngModel",o.filterParams.tipoUsuario)}}function u(o,i){1&o&&a.Sb(0,"i",33)}function g(o,i){1&o&&(a.Xb(0,"div",34),a.Dc(1," No se encontraron resultados "),a.Wb())}function m(o,i){1&o&&(a.Xb(0,"option",44),a.Dc(1,"20"),a.Wb())}function h(o,i){1&o&&(a.Xb(0,"option",45),a.Dc(1,"50"),a.Wb())}function f(o,i){if(1&o){const o=a.Yb();a.Xb(0,"select",40),a.ec("ngModelChange",(function(i){return a.wc(o),a.gc(2).filterParams.size=i}))("change",(function(i){return a.wc(o),a.gc(2).onChangePageSize(i.target.value)})),a.Xb(1,"option",41),a.Dc(2,"10"),a.Wb(),a.Cc(3,m,2,0,"option",42),a.Cc(4,h,2,0,"option",43),a.Wb()}if(2&o){const o=a.gc(2);a.mc("ngModel",o.filterParams.size),a.Fb(3),a.mc("ngIf",o.page.number<o.page.totalElements/20),a.Fb(1),a.mc("ngIf",o.page.number<o.page.totalElements/50)}}function p(o,i){if(1&o){const o=a.Yb();a.Xb(0,"div",35),a.Xb(1,"button",36),a.ec("click",(function(){return a.wc(o),a.gc().downloadXLSFile()})),a.Sb(2,"i",37),a.Wb(),a.Cc(3,f,5,3,"select",38),a.Xb(4,"strong",39),a.Dc(5," Tama\xf1o Pagina \xa0\xa0\xa0\xa0"),a.Wb(),a.Wb()}if(2&o){const o=a.gc();a.Fb(3),a.mc("ngIf",0==o.page.last||1==o.page.first)}}function X(o,i){if(1&o){const o=a.Yb();a.Xb(0,"button",57),a.ec("click",(function(){a.wc(o);const i=a.gc().$implicit;return a.gc(2).redirectToAdjustment(i.id)})),a.Sb(1,"i",58),a.Wb()}}function v(o,i){1&o&&(a.Xb(0,"td",55),a.Xb(1,"span",59),a.Dc(2,"ACTIVO"),a.Wb(),a.Wb())}function W(o,i){1&o&&(a.Xb(0,"td",55),a.Xb(1,"span",60),a.Dc(2,"INACTIVO"),a.Wb(),a.Wb())}const C=function(o,i){return{"btn-secondary":o,"btn-primary":i}};function I(o,i){if(1&o){const o=a.Yb();a.Xb(0,"tr"),a.Xb(1,"td",50),a.Xb(2,"button",51),a.ec("click",(function(){a.wc(o);const e=i.$implicit;return a.gc(2).redirectToUser(e.id)})),a.Sb(3,"i",52),a.Wb(),a.Cc(4,X,2,0,"button",53),a.Wb(),a.Xb(5,"td",54),a.Dc(6),a.Wb(),a.Xb(7,"td",55),a.Dc(8),a.Wb(),a.Xb(9,"td",55),a.Dc(10),a.Wb(),a.Xb(11,"td",55),a.Dc(12),a.Wb(),a.Cc(13,v,3,0,"td",56),a.Cc(14,W,3,0,"td",56),a.Wb()}if(2&o){const o=i.$implicit,e=a.gc(2);a.Fb(2),a.mc("disabled","contabilidad"===e.module&&"INTERNO"===o.tipoUsuario)("ngClass",a.qc(9,C,"contabilidad"===e.module&&"INTERNO"===o.tipoUsuario,"contabilidad"!==e.module||"INTERNO"!==o.tipoUsuario)),a.Fb(2),a.mc("ngIf","contabilidad"===e.module),a.Fb(2),a.Ec(o.noEmpleado),a.Fb(2),a.Ec(o.nombre),a.Fb(2),a.Ec(o.email),a.Fb(2),a.Ec(o.tipoUsuario),a.Fb(1),a.mc("ngIf",!0===o.activo),a.Fb(1),a.mc("ngIf",!1===o.activo)}}function M(o,i){if(1&o){const o=a.Yb();a.Xb(0,"li",66),a.Xb(1,"button",67),a.ec("click",(function(){a.wc(o);const i=a.gc(4);return i.updateDataTable(0,i.page.size)})),a.Sb(2,"i",68),a.Wb(),a.Wb()}}function D(o,i){if(1&o){const o=a.Yb();a.Xb(0,"li",66),a.Xb(1,"button",67),a.ec("click",(function(){a.wc(o);const i=a.gc(4);return i.updateDataTable(i.page.number-1,i.page.size)})),a.Dc(2),a.Wb(),a.Wb()}if(2&o){const o=a.gc(4);a.Fb(2),a.Ec(o.page.number)}}function E(o,i){if(1&o){const o=a.Yb();a.Xb(0,"li",66),a.Xb(1,"button",67),a.ec("click",(function(){a.wc(o);const i=a.gc(4);return i.updateDataTable(i.page.number+1,i.page.size)})),a.Dc(2),a.Wb(),a.Wb()}if(2&o){const o=a.gc(4);a.Fb(2),a.Ec(o.page.number+2)}}function N(o,i){if(1&o){const o=a.Yb();a.Xb(0,"li",66),a.Xb(1,"button",67),a.ec("click",(function(){a.wc(o);const i=a.gc(4);return i.updateDataTable(i.page.totalPages-1,i.page.size)})),a.Sb(2,"i",69),a.Wb(),a.Wb()}}function U(o,i){if(1&o&&(a.Xb(0,"ul",62),a.Cc(1,M,3,0,"li",63),a.Cc(2,D,3,1,"li",63),a.Xb(3,"li",64),a.Xb(4,"a",65),a.Xb(5,"strong"),a.Dc(6),a.Wb(),a.Wb(),a.Wb(),a.Cc(7,E,3,1,"li",63),a.Cc(8,N,3,0,"li",63),a.Wb()),2&o){const o=a.gc(3);a.Fb(1),a.mc("ngIf",0==o.page.first),a.Fb(1),a.mc("ngIf",0==o.page.first),a.Fb(4),a.Ec(o.page.number+1),a.Fb(1),a.mc("ngIf",0==o.page.last),a.Fb(1),a.mc("ngIf",0==o.page.last)}}function k(o,i){if(1&o&&(a.Xb(0,"div",35),a.Cc(1,U,9,5,"ul",61),a.Wb()),2&o){const o=a.gc(2);a.Fb(1),a.mc("ngIf",o.page.totalElements>1)}}function O(o,i){if(1&o&&(a.Xb(0,"div",46),a.Xb(1,"table",47),a.Xb(2,"thead",48),a.Xb(3,"tr"),a.Xb(4,"th"),a.Dc(5,"ACCIONES"),a.Wb(),a.Xb(6,"th"),a.Dc(7,"NO. EMPLEADO"),a.Wb(),a.Xb(8,"th"),a.Dc(9,"NOMBRE"),a.Wb(),a.Xb(10,"th"),a.Dc(11,"CORREO"),a.Wb(),a.Xb(12,"th"),a.Dc(13,"TIPO"),a.Wb(),a.Xb(14,"th"),a.Dc(15,"STATUS"),a.Wb(),a.Wb(),a.Wb(),a.Xb(16,"tbody"),a.Cc(17,I,15,12,"tr",49),a.Wb(),a.Wb(),a.Cc(18,k,2,1,"div",26),a.Wb()),2&o){const o=a.gc();a.Fb(17),a.mc("ngForOf",o.page.content),a.Fb(1),a.mc("ngIf",0==o.page.empty)}}function R(o,i){1&o&&a.Sb(0,"cybord-loader")}let A=(()=>{class o{constructor(o,i,e,a){this.datepipe=o,this.userService=i,this.downloadService=e,this.router=a,this.module="recursos-humanos",this.page=new t.a,this.pageSize="10",this.loading=!1,this.filterParams={email:"",estatus:"*",nombre:"",tipoUsuario:"*",page:"0",size:"10"}}ngOnInit(){this.module=this.router.url.split("/")[1],"recursos-humanos"===this.module&&(this.filterParams.tipoUsuario="INTERNO"),"contabilidad"===this.module&&(this.filterParams.tipoUsuario="EXTERNO"),this.updateDataTable(0,10)}updateDataTable(o,i,e){this.loading=!0,this.filterParams.page=o||0,this.filterParams.size=i||10,this.userService.getUsuarios(this.filterParams).subscribe(o=>{this.page=o,this.loading=!1})}onChangePageSize(o){this.updateDataTable(this.page.number,o)}redirectToUser(o){this.router.navigate([`../${this.module}/usuarios/${o}`])}redirectToAdjustment(o){this.router.navigate(["../contabilidad/ajustes/"+o])}downloadXLSFile(){this.loading=!0,this.filterParams.page="0",this.filterParams.size="100000",this.userService.getUsuariosReport(this.filterParams).subscribe(o=>{this.downloadService.downloadFile(o.dato,`ReporteUsuarios-${this.datepipe.transform(Date.now(),"yyyy-MM-dd")}.xls`,"application/vnd.ms-excel"),this.loading=!1})}}return o.\u0275fac=function(i){return new(i||o)(a.Rb(n.f),a.Rb(s.a),a.Rb(c.a),a.Rb(r.c))},o.\u0275cmp=a.Lb({type:o,selectors:[["cybord-usuarios"]],decls:53,vars:12,consts:[[1,"animated","fadeIn"],[1,"row"],[1,"col-sm-12","col-md-12"],[1,"card"],[1,"card-header"],[1,"card-body"],[1,"row","slide_1"],[1,"col-md-2"],["for","inputCorreo",1,"label"],["type","text","nbInput","","fullWidth","","id","inputCorreo","placeholder","email usuario",1,"form-control",3,"ngModel","disabled","ngModelChange"],[1,"col-md-3"],["for","nombreusuario",1,"label"],["type","text","nbInput","","fullWidth","","id","nombreusu","placeholder","nombre usuario",1,"form-control",3,"ngModel","disabled","ngModelChange"],["class","col-md-2",4,"ngIf"],[1,"col-md-5"],["for","inputActivo",1,"label"],[1,"row","form-inline"],["id","inputActivo","fullWidth","",1,"form-control",2,"display","block",3,"ngModel","ngModelChange"],["value","*"],["value","1"],["value","0"],[1,"btn","btn-primary",3,"disabled","click"],["class","fa fa-spinner fa-spin",4,"ngIf"],[1,"btn","btn-primary",3,"click"],[1,"col"],["class","alert alert-primary","role","alert",4,"ngIf"],["class","clearfix",4,"ngIf"],["class","table-responsive",4,"ngIf"],[4,"ngIf"],["for","tipoUsuario",1,"label"],["id","inputTipoUsuario","fullWidth","",1,"form-control",2,"display","block",3,"ngModel","ngModelChange"],["value","INTERNO"],["value","EXTERNO"],[1,"fa","fa-spinner","fa-spin"],["role","alert",1,"alert","alert-primary"],[1,"clearfix"],[1,"btn-sm","btn-success","float-right",3,"click"],[1,"fa","fa-file-excel-o","fa-sm"],["id","inputunidad","style","display:block;width: 95px; margin-right: 15px;","class","float-right form-control form-control-sm",3,"ngModel","ngModelChange","change",4,"ngIf"],[1,"float-right"],["id","inputunidad",1,"float-right","form-control","form-control-sm",2,"display","block","width","95px","margin-right","15px",3,"ngModel","ngModelChange","change"],["value","10"],["value","20",4,"ngIf"],["value","50",4,"ngIf"],["value","20"],["value","50"],[1,"table-responsive"],[1,"table","table-bordered","table-sm"],[1,"thead-dark"],[4,"ngFor","ngForOf"],["scope","row",1,"text-center"],[1,"btn-sm",3,"disabled","ngClass","click"],[1,"fa","fa-search","fa-sm"],["class","btn-sm btn-success",3,"click",4,"ngIf"],["scope","row",1,"text-right"],["scope","row"],["scope","row",4,"ngIf"],[1,"btn-sm","btn-success",3,"click"],[1,"fa","fa-money","fa-sm"],[1,"badge","badge-success"],[1,"badge","badge-danger"],["class","pagination float-right",4,"ngIf"],[1,"pagination","float-right"],["class","page-item",4,"ngIf"],[1,"page-item","active"],[1,"page-link"],[1,"page-item"],[1,"btn","page-link",3,"click"],[1,"icon-control-rewind","icons"],[1,"icon-control-forward","icons"]],template:function(o,i){1&o&&(a.Xb(0,"div",0),a.Xb(1,"div",1),a.Xb(2,"div",2),a.Xb(3,"div",3),a.Xb(4,"div",4),a.Xb(5,"strong"),a.Dc(6,"Altas y bajas de usuarios - Filtros de busqueda"),a.Wb(),a.Wb(),a.Xb(7,"div",5),a.Xb(8,"div",6),a.Xb(9,"div",7),a.Xb(10,"label",8),a.Dc(11,"Correo Usuario"),a.Wb(),a.Xb(12,"input",9),a.ec("ngModelChange",(function(o){return i.filterParams.email=o})),a.Wb(),a.Wb(),a.Xb(13,"div",10),a.Xb(14,"label",11),a.Dc(15,"Nombre Usuario"),a.Wb(),a.Xb(16,"input",12),a.ec("ngModelChange",(function(o){return i.filterParams.nombre=o})),a.Wb(),a.Wb(),a.Cc(17,d,11,1,"div",13),a.Xb(18,"div",14),a.Xb(19,"label",15),a.Dc(20,"Estatus Usuario"),a.Wb(),a.Xb(21,"div",16),a.Xb(22,"select",17),a.ec("ngModelChange",(function(o){return i.filterParams.estatus=o})),a.Xb(23,"option",18),a.Dc(24,"TODOS"),a.Wb(),a.Xb(25,"option",19),a.Dc(26,"ACTIVO"),a.Wb(),a.Xb(27,"option",20),a.Dc(28,"INACTIVO"),a.Wb(),a.Wb(),a.Xb(29,"p"),a.Dc(30,"\xa0\xa0\xa0\xa0"),a.Wb(),a.Xb(31,"button",21),a.ec("click",(function(){return i.updateDataTable(0,10)})),a.Dc(32,"BUSCAR "),a.Cc(33,u,1,0,"i",22),a.Wb(),a.Xb(34,"p"),a.Dc(35,"\xa0\xa0\xa0\xa0"),a.Wb(),a.Xb(36,"button",23),a.ec("click",(function(){return i.redirectToUser("*")})),a.Dc(37,"NUEVO USUARIO"),a.Wb(),a.Wb(),a.Wb(),a.Wb(),a.Wb(),a.Wb(),a.Wb(),a.Wb(),a.Xb(38,"div",1),a.Xb(39,"div",2),a.Xb(40,"div",3),a.Xb(41,"div",4),a.Xb(42,"strong"),a.Dc(43,"Resultados"),a.Wb(),a.Wb(),a.Xb(44,"div",5),a.Xb(45,"div",1),a.Xb(46,"div",24),a.Cc(47,g,2,0,"div",25),a.Cc(48,p,6,1,"div",26),a.Wb(),a.Wb(),a.Xb(49,"div",1),a.Xb(50,"div",24),a.Cc(51,O,19,2,"div",27),a.Wb(),a.Wb(),a.Wb(),a.Cc(52,R,1,0,"cybord-loader",28),a.Wb(),a.Wb(),a.Wb(),a.Wb()),2&o&&(a.Fb(12),a.mc("ngModel",i.filterParams.email)("disabled",i.filterParams.nombre.length>0),a.Fb(4),a.mc("ngModel",i.filterParams.nombre)("disabled",i.filterParams.email.length>0),a.Fb(1),a.mc("ngIf","recursos-humanos"!=i.module),a.Fb(5),a.mc("ngModel",i.filterParams.estatus),a.Fb(9),a.mc("disabled",i.loading),a.Fb(2),a.mc("ngIf",i.loading),a.Fb(14),a.mc("ngIf",!0===i.page.empty),a.Fb(1),a.mc("ngIf",!1===i.page.empty),a.Fb(3),a.mc("ngIf",0==i.page.empty),a.Fb(1),a.mc("ngIf",i.loading))},directives:[b.b,b.h,b.k,n.n,b.o,b.l,b.p,n.m,n.l,l.a],styles:[""]}),o})()},qZ4S:function(o,i,e){"use strict";e.d(i,"a",(function(){return a}));var t=e("8Y7J");let a=(()=>{class o{constructor(){}validateSolicitud(o,i){const e=[];return"RetiroParcialAhorro"===o.tipo&&+o.atributos.MONTO>i&&e.push("No es posible solicitar un monto superior al total de su ahorro de $"+i),void 0===o.atributos.MONTO&&e.push("El monto de la solicitud no ha sido asignado"),"CancelacionAhorro"===o.tipo&&(void 0===o.atributos.RAZON_CANCELACION||o.atributos.RAZON_CANCELACION.length<10)&&e.push("La descripci\xf3n del motivo de cancelaci\xf3n es muy corto"),e}validarUsuario(o){const i=[],e=new RegExp("^([0-9a-zA-Z\xc0-\xfa.,&-_ ]+)$"),t=new RegExp("^([0-9]{8,20})$");return(!new RegExp("^[a-z0-9A-Z._%+-]+@[a-z0-9.-]+\\.[a-z]{2,4}$").test(o.email)||void 0===o.email)&&o.email.length<2&&o.email.length>100&&i.push("El email no es valido"),(!e.test(o.nombre)||void 0===o.nombre||o.nombre.length<2||o.nombre.length>100)&&i.push("El nombre no es valido"),void 0===o.noEmpleado&&i.push("El No. de empleado no ha sido asignado"),"*"!==o.datosUsuario.OFICINA&&void 0!==o.datosUsuario.OFICINA||i.push("La oficina no ha sido asignado"),"*"!==o.datosUsuario.BANCO&&void 0!==o.datosUsuario.BANCO||i.push("El banco no ha sido asignado"),"*"!==o.datosUsuario.TIPO_CUENTA&&void 0!==o.datosUsuario.TIPO_CUENTA||i.push("El tipo de cuenta no esta definido"),t.test(o.datosUsuario.CUENTA)||i.push("El no. de cuenta es invalido"),Number(o.datosUsuario.SUELDO)<100&&i.push("El saldo no es valido (MENOR A 100)"),i}}return o.\u0275fac=function(i){return new(i||o)},o.\u0275prov=t.Nb({token:o,factory:o.\u0275fac,providedIn:"root"}),o})()},uwdg:function(o,i,e){"use strict";e.d(i,"a",(function(){return F}));var t=e("mrSG");class a{constructor(o,i,e){this.tipoDato=o,this.dato=i,this.relevancia=e||0}}var n=e("KZhB");class s{constructor(o){this.nombre=o}}var c=e("8Y7J"),r=e("SVse"),b=e("iInd"),l=e("4ujS"),d=e("ESM5"),u=e("qZ4S"),g=e("s7LF"),m=e("ienR"),h=e("LqlI"),f=e("jksu");const p=["modalConfirmacion"];function X(o,i){if(1&o&&(c.Xb(0,"p"),c.Dc(1),c.Wb()),2&o){const o=i.$implicit;c.Fb(1),c.Ec(o)}}function v(o,i){if(1&o&&(c.Xb(0,"div",69),c.Cc(1,X,2,1,"p",70),c.Wb()),2&o){const o=c.gc();c.Fb(1),c.mc("ngForOf",o.errorMessages)}}function W(o,i){if(1&o&&(c.Xb(0,"option",71),c.Dc(1),c.Wb()),2&o){const o=i.$implicit;c.mc("value",o.nombre),c.Fb(1),c.Ec(o.valor)}}function C(o,i){if(1&o&&(c.Xb(0,"option",71),c.Dc(1),c.Wb()),2&o){const o=i.$implicit;c.mc("value",o.nombre),c.Fb(1),c.Ec(o.valor)}}function I(o,i){if(1&o&&(c.Xb(0,"option",71),c.Dc(1),c.Wb()),2&o){const o=i.$implicit;c.mc("value",o.nombre),c.Fb(1),c.Ec(o.valor)}}function M(o,i){if(1&o&&(c.Xb(0,"p",72),c.Dc(1),c.Wb()),2&o){const o=c.gc();c.Fb(1),c.Ec(o.params.success)}}function D(o,i){1&o&&c.Sb(0,"cybord-loader")}function E(o,i){1&o&&c.Sb(0,"i",75)}function N(o,i){if(1&o){const o=c.Yb();c.Xb(0,"button",73),c.ec("click",(function(){return c.wc(o),c.gc().openModal()})),c.Dc(1," Registrar "),c.Cc(2,E,1,0,"i",74),c.Wb()}if(2&o){const o=c.gc();c.mc("disabled",o.loading),c.Fb(2),c.mc("ngIf",o.loading)}}function U(o,i){1&o&&c.Sb(0,"i",75)}function k(o,i){if(1&o){const o=c.Yb();c.Xb(0,"button",73),c.ec("click",(function(){return c.wc(o),c.gc().openModal()})),c.Dc(1," Actualizar "),c.Cc(2,U,1,0,"i",74),c.Wb()}if(2&o){const o=c.gc();c.mc("disabled",o.loading),c.Fb(2),c.mc("ngIf",o.loading)}}function O(o,i){if(1&o){const o=c.Yb();c.Xb(0,"button",76),c.ec("click",(function(){return c.wc(o),c.gc().update()})),c.Dc(1,"Si"),c.Wb()}}function R(o,i){if(1&o){const o=c.Yb();c.Xb(0,"button",76),c.ec("click",(function(){return c.wc(o),c.gc().register()})),c.Dc(1,"Si"),c.Wb()}}const A=function(){return{dateInputFormat:"DD/MM/YYYY"}};let F=(()=>{class o{constructor(o,i,e,t,a,s){this.datepipe=o,this.route=i,this.catService=e,this.usuarioServicio=t,this.router=a,this.validationService=s,this.submitted=!1,this.loading=!1,this.usuario=new n.a,this.errorMessages=[],this.mensajeModal="",this.params={success:"",message:"",id:"*",module:"usuarios",interno:!1},this.oficinas=[],this.bancos=[],this.cuentas=[],this.roles={USUARIO:!0,RECURSOS_HUMANOS:!1,TESORERIA:!1,CONTABILIDAD:!1,GERENCIA_INTERNA:!1,GERENCIA_EXTERNA:!1,ADMINISTRACION:!1,DIRECCION:!1},this.nombreRoles=Object.keys(this.roles)}ngOnInit(){this.maxDate=new Date,this.loading=!0,this.errorMessages=[],this.params.module=this.router.url.split("/")[1],this.antiguedad=new Date,this.catService.getCatalogosByTipo("oficinas").subscribe(o=>this.oficinas=o),this.catService.getCatalogosByTipo("bancos").subscribe(o=>this.bancos=o),this.catService.getCatalogosByTipo("tipo-cuenta").subscribe(o=>this.cuentas=o),this.route.paramMap.subscribe(o=>{const i=o.get("idUsuario");"*"!==i?(this.updateUserInfo(+i),this.loading=!1):(this.antiguedad=new Date,this.loading=!1)})}updateUserInfo(o){return Object(t.a)(this,void 0,void 0,(function*(){try{this.usuario=yield this.usuarioServicio.getUsuario(o).toPromise(),this.antiguedad=new Date(this.usuario.datosUsuario.ANTIGUEDAD);for(const o of this.usuario.roles)this.roles[o]=!0}catch(i){this.loading=!1,this.errorMessages.push(i)}}))}toggleUserType(){this.usuario.tipoUsuario="INTERNO"===this.usuario.tipoUsuario?"EXTERNO":"INTERNO"}openModal(){this.mensajeModal=void 0!==this.usuario.id?"\xbfActualizar usuario?":"\xbfRegistrar usuario?",this.modalConfirmacion.show()}decline(){this.modalConfirmacion.hide()}update(){this.errorMessages=[],this.loading=!0,this.modalConfirmacion.hide(),this.errorMessages=this.validationService.validarUsuario(this.usuario),this.errorMessages.length>0?this.loading=!1:this.usuarioServicio.actualizaUser(this.usuario).toPromise().then(o=>Object(t.a)(this,void 0,void 0,(function*(){void 0!==this.usuario.datosUsuario.ANTIGUEDAD&&(this.usuario.datosUsuario.ANTIGUEDAD=this.datepipe.transform(this.antiguedad,"yyyy-MM-dd"));for(const e in this.usuario.datosUsuario)if(void 0!==e&&void 0!==this.usuario.datosUsuario[e]&&""!==this.usuario.datosUsuario[e]&&null!==this.usuario.datosUsuario[e]&&o.datosUsuario[e]!==this.usuario.datosUsuario[e]){const o=new a(e,this.usuario.datosUsuario[e]);yield this.usuarioServicio.actualizaDatoUsuario(this.usuario.id,e,o).toPromise()}if("administracion"===this.params.module){console.log("Updating user roles");var i=0;for(const o in this.roles)!1===this.roles[o]&&this.usuario.roles.find(i=>i===o)&&(yield this.usuarioServicio.deleteRoles(this.usuario.id,this.nombreRoles[i]).toPromise()),i++;for(const o in this.roles)!0!==this.roles[o]||this.usuario.roles.find(i=>i===o)||(yield this.usuarioServicio.insertarRoles(this.usuario.id,new s(o)).toPromise())}this.submitted=!0,this.params.success="El usuario ha sido actualizado satisfactoriamente."}))).then(()=>this.router.navigate([`../${this.params.module}/usuarios`])).catch(o=>{this.errorMessages.push(o),this.loading=!1})}register(){this.errorMessages=[];let o=0;this.loading=!0,this.modalConfirmacion.hide(),this.errorMessages=this.validationService.validarUsuario(this.usuario),this.errorMessages.length>0&&(this.loading=!1),console.log("registering"),this.usuario.datosUsuario.ANTIGUEDAD=this.datepipe.transform(this.antiguedad,"yyyy-MM-dd"),this.usuarioServicio.insertarUsuario(this.usuario).toPromise().then(i=>Object(t.a)(this,void 0,void 0,(function*(){o=i.id;for(const o in this.usuario.datosUsuario)if(void 0!==o&&void 0!==this.usuario.datosUsuario[o]){const e=this.usuario.datosUsuario[o];yield this.usuarioServicio.insertarDatoUsuario(i.id,new a(o,e)).toPromise()}for(const o in this.roles)!0===this.roles[o]&&(yield this.usuarioServicio.insertarRoles(i.id,new s(o)).toPromise());this.submitted=!0}))).then(()=>this.router.navigate([`../${this.params.module}/usuarios`])).catch(o=>{this.errorMessages.push(o),this.loading=!1})}updateRoles(){return Object(t.a)(this,void 0,void 0,(function*(){for(const o in this.roles)!1===this.roles[o]&&this.usuario.roles.find(i=>i===o)&&(yield this.usuarioServicio.deleteRoles(this.usuario.id,this.roles[o]).toPromise());for(const o in this.roles)!0!==this.roles[o]||this.usuario.roles.find(i=>i===o)||(yield this.usuarioServicio.insertarRoles(this.usuario.id,new s(o)).toPromise())}))}clearInput(){this.usuario=new n.a,this.params.success="",this.errorMessages=[],this.submitted=!1}}return o.\u0275fac=function(i){return new(i||o)(c.Rb(r.f),c.Rb(b.a),c.Rb(l.a),c.Rb(d.a),c.Rb(b.c),c.Rb(u.a))},o.\u0275cmp=c.Lb({type:o,selectors:[["cybord-usuario"]],viewQuery:function(o,i){var e;1&o&&c.Ic(p,!0),2&o&&c.tc(e=c.fc())&&(i.modalConfirmacion=e.first)},decls:147,vars:43,consts:[[1,"animated","fadeIn"],[1,"row"],[1,"col-sm-12","col-md-12"],[1,"card"],[1,"card-header"],[1,"card-body"],["class","alert alert-warning","role","alert",4,"ngIf"],[1,"col-xs-12","col-sm-12","col-md-8"],[1,"form-group","row"],[1,"col-md-3","col-form-label"],[1,"col-md-9"],["type","text","placeholder","Sobrenombre o alias",1,"form-control",3,"ngModel","ngModelChange"],["type","text","placeholder","Correo Electronico",1,"form-control",3,"ngModel","ngModelChange"],[1,"col-md-7"],[1,"switch","switch-label","switch-primary"],["type","checkbox",1,"switch-input",3,"checked","ngModel","ngModelChange"],["data-checked","ON","data-unchecked","OFF",1,"switch-slider"],[1,"col-md-7","col-form-label"],[1,"form-check"],["type","radio","name","tipo","id","radio3","value","INTERNO",1,"form-check-input",3,"checked","click"],["for","radio3",1,"form-check-label"],["type","radio","name","tipo","id","radio4","value","EXTERNO",1,"form-check-input",3,"checked","click"],["for","radio4",1,"form-check-label"],["type","text","id","no-emp","name","text-inputa","maxlength","10","placeholder","No empleado",1,"form-control",3,"ngModel","ngModelChange"],["id","office","name","office",1,"form-control",3,"ngModel","ngModelChange"],["value","*"],[3,"value",4,"ngFor","ngForOf"],["id","bank","name","bank",1,"form-control",3,"ngModel","ngModelChange"],["id","account","name","account",1,"form-control",3,"ngModel","ngModelChange"],["type","text","id","no-account","name","account","maxlength","20","minlength","8","placeholder","0000 0000 0000 0000",1,"form-control",3,"ngModel","ngModelChange"],["type","number","id","quantity","name","text-inputafg","min","1","placeholder","1.00",1,"form-control",3,"ngModel","ngModelChange"],["id","start-date","type","text","bsDatepicker","",1,"form-control",3,"maxDate","bsValue","bsConfig","maxDateChange","bsValueChange"],["dp","bsDatepicker"],[1,"col-xs-12","col-sm-12","col-md-4"],[1,"col-md-9","col-form-label"],["type","checkbox","value","option1","id","checkbox1",1,"form-check-input",3,"ngModel","disabled","ngModelChange"],["for","checkbox1",1,"form-check-label"],["type","checkbox","value","option1","id","checkbox2",1,"form-check-input",3,"ngModel","disabled","ngModelChange"],["for","checkbox2",1,"form-check-label"],[1,"form-check","checkbox"],["type","checkbox","value","option1","id","checkbox3",1,"form-check-input",3,"ngModel","disabled","ngModelChange"],["for","checkbox3",1,"form-check-label"],["type","checkbox","value","option1","id","checkbox4",1,"form-check-input",3,"ngModel","disabled","ngModelChange"],["for","checkbox4",1,"form-check-label"],["type","checkbox","value","option1","id","checkbox5",1,"form-check-input",3,"ngModel","disabled","ngModelChange"],["for","checkbox5",1,"form-check-label"],["type","checkbox","value","option1","id","checkbox8",1,"form-check-input",3,"ngModel","disabled","ngModelChange"],["for","checkbox8",1,"form-check-label"],["type","checkbox","value","option1","id","checkbox7",1,"form-check-input",3,"ngModel","disabled","ngModelChange"],["for","checkbox7",1,"form-check-label"],["type","checkbox","value","option1","id","checkbox6",1,"form-check-input",3,"ngModel","disabled","ngModelChange"],["for","checkbox6",1,"form-check-label"],["class","alert alert-success","role","alert",4,"ngIf"],[4,"ngIf"],[1,"card-footer"],[1,"float-right","slide_2"],["class","btn btn-primary",3,"disabled","click",4,"ngIf"],["bsModal","","id","modalConfirmacion","tabindex","-1","role","dialog","aria-labelledby","modalConfirmacion","aria-hidden","true",1,"modal","fade"],["modalConfirmacion","bs-modal"],["role","document",1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],["id","modalConfirmacionLabel",1,"modal-title"],["type","button","data-dismiss","modal","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"modal-footer"],["type","button","class","btn btn-primary",3,"click",4,"ngIf"],["type","button",1,"btn","btn-secondary",3,"click"],["role","alert",1,"alert","alert-warning"],[4,"ngFor","ngForOf"],[3,"value"],["role","alert",1,"alert","alert-success"],[1,"btn","btn-primary",3,"disabled","click"],["class","fa fa-spinner fa-spin",4,"ngIf"],[1,"fa","fa-spinner","fa-spin"],["type","button",1,"btn","btn-primary",3,"click"]],template:function(o,i){1&o&&(c.Xb(0,"div",0),c.Xb(1,"div",1),c.Xb(2,"div",2),c.Xb(3,"div",3),c.Xb(4,"div",4),c.Xb(5,"strong"),c.Dc(6,"Usuarios"),c.Wb(),c.Wb(),c.Xb(7,"div",5),c.Cc(8,v,2,1,"div",6),c.Xb(9,"div",1),c.Xb(10,"div",7),c.Xb(11,"div",8),c.Xb(12,"strong",9),c.Dc(13,"Nombre"),c.Wb(),c.Xb(14,"div",10),c.Xb(15,"input",11),c.ec("ngModelChange",(function(o){return i.usuario.nombre=o})),c.Wb(),c.Wb(),c.Wb(),c.Xb(16,"div",8),c.Xb(17,"strong",9),c.Dc(18,"Email"),c.Wb(),c.Xb(19,"div",10),c.Xb(20,"input",12),c.ec("ngModelChange",(function(o){return i.usuario.email=o})),c.Wb(),c.Wb(),c.Wb(),c.Xb(21,"div",8),c.Xb(22,"strong",9),c.Dc(23,"Usuario activo"),c.Wb(),c.Xb(24,"div",13),c.Xb(25,"label",14),c.Xb(26,"input",15),c.ec("ngModelChange",(function(o){return i.usuario.activo=o})),c.Wb(),c.Sb(27,"span",16),c.Wb(),c.Wb(),c.Wb(),c.Xb(28,"div",8),c.Xb(29,"strong",9),c.Dc(30,"Tipo Usuario"),c.Wb(),c.Xb(31,"div",17),c.Xb(32,"div",18),c.Xb(33,"input",19),c.ec("click",(function(){return i.toggleUserType()})),c.Wb(),c.Xb(34,"label",20),c.Dc(35," INTERNO "),c.Wb(),c.Wb(),c.Xb(36,"div",18),c.Xb(37,"input",21),c.ec("click",(function(){return i.toggleUserType()})),c.Wb(),c.Xb(38,"label",22),c.Dc(39," EXTERNO "),c.Wb(),c.Wb(),c.Wb(),c.Wb(),c.Xb(40,"div",8),c.Xb(41,"strong",9),c.Dc(42,"No. Empleado"),c.Wb(),c.Xb(43,"div",10),c.Xb(44,"input",23),c.ec("ngModelChange",(function(o){return i.usuario.noEmpleado=o})),c.Wb(),c.Wb(),c.Wb(),c.Xb(45,"div",8),c.Xb(46,"strong",9),c.Dc(47,"Oficina"),c.Wb(),c.Xb(48,"div",13),c.Xb(49,"select",24),c.ec("ngModelChange",(function(o){return i.usuario.datosUsuario.OFICINA=o})),c.Xb(50,"option",25),c.Dc(51,"Seleccionar"),c.Wb(),c.Cc(52,W,2,2,"option",26),c.Wb(),c.Wb(),c.Wb(),c.Xb(53,"div",8),c.Xb(54,"strong",9),c.Dc(55,"BANCO"),c.Wb(),c.Xb(56,"div",13),c.Xb(57,"select",27),c.ec("ngModelChange",(function(o){return i.usuario.datosUsuario.BANCO=o})),c.Xb(58,"option",25),c.Dc(59,"Seleccionar"),c.Wb(),c.Cc(60,C,2,2,"option",26),c.Wb(),c.Wb(),c.Wb(),c.Xb(61,"div",8),c.Xb(62,"strong",9),c.Dc(63,"TIPO CUENTA"),c.Wb(),c.Xb(64,"div",13),c.Xb(65,"select",28),c.ec("ngModelChange",(function(o){return i.usuario.datosUsuario.TIPO_CUENTA=o})),c.Xb(66,"option",25),c.Dc(67,"Seleccionar"),c.Wb(),c.Cc(68,I,2,2,"option",26),c.Wb(),c.Wb(),c.Wb(),c.Xb(69,"div",8),c.Xb(70,"strong",9),c.Dc(71,"No. Cuenta"),c.Wb(),c.Xb(72,"div",10),c.Xb(73,"input",29),c.ec("ngModelChange",(function(o){return i.usuario.datosUsuario.CUENTA=o})),c.Wb(),c.Wb(),c.Wb(),c.Xb(74,"div",8),c.Xb(75,"strong",9),c.Dc(76,"Sueldo"),c.Wb(),c.Xb(77,"div",13),c.Xb(78,"input",30),c.ec("ngModelChange",(function(o){return i.usuario.datosUsuario.SUELDO=o})),c.Wb(),c.Wb(),c.Wb(),c.Xb(79,"div",8),c.Xb(80,"strong",9),c.Dc(81,"Fecha Antiguedad"),c.Wb(),c.Xb(82,"div",13),c.Xb(83,"input",31,32),c.ec("maxDateChange",(function(o){return i.maxDate=o}))("bsValueChange",(function(o){return i.antiguedad=o})),c.Wb(),c.Wb(),c.Wb(),c.Wb(),c.Xb(85,"div",33),c.Xb(86,"div",8),c.Xb(87,"label",9),c.Xb(88,"strong"),c.Dc(89,"Roles"),c.Wb(),c.Wb(),c.Xb(90,"div",34),c.Xb(91,"div",18),c.Xb(92,"input",35),c.ec("ngModelChange",(function(o){return i.roles.USUARIO=o})),c.Wb(),c.Xb(93,"label",36),c.Dc(94," USUARIO "),c.Wb(),c.Wb(),c.Xb(95,"div",18),c.Xb(96,"input",37),c.ec("ngModelChange",(function(o){return i.roles.RECURSOS_HUMANOS=o})),c.Wb(),c.Xb(97,"label",38),c.Dc(98," RECURSOS HUMANOS "),c.Wb(),c.Wb(),c.Xb(99,"div",39),c.Xb(100,"input",40),c.ec("ngModelChange",(function(o){return i.roles.CONTABILIDAD=o})),c.Wb(),c.Xb(101,"label",41),c.Dc(102," CONTABILIDAD "),c.Wb(),c.Wb(),c.Xb(103,"div",39),c.Xb(104,"input",42),c.ec("ngModelChange",(function(o){return i.roles.TESORERIA=o})),c.Wb(),c.Xb(105,"label",43),c.Dc(106," TESORERIA "),c.Wb(),c.Wb(),c.Xb(107,"div",39),c.Xb(108,"input",44),c.ec("ngModelChange",(function(o){return i.roles.GERENCIA_INTERNA=o})),c.Wb(),c.Xb(109,"label",45),c.Dc(110," GERENCIA INTERNA "),c.Wb(),c.Wb(),c.Xb(111,"div",39),c.Xb(112,"input",46),c.ec("ngModelChange",(function(o){return i.roles.GERENCIA_EXTERNA=o})),c.Wb(),c.Xb(113,"label",47),c.Dc(114," GERENCIA EXTERNA "),c.Wb(),c.Wb(),c.Xb(115,"div",39),c.Xb(116,"input",48),c.ec("ngModelChange",(function(o){return i.roles.DIRECCION=o})),c.Wb(),c.Xb(117,"label",49),c.Dc(118," DIRECCION "),c.Wb(),c.Wb(),c.Xb(119,"div",39),c.Xb(120,"input",50),c.ec("ngModelChange",(function(o){return i.roles.ADMINISTRACION=o})),c.Wb(),c.Xb(121,"label",51),c.Dc(122," ADMINISTRACION "),c.Wb(),c.Wb(),c.Wb(),c.Wb(),c.Wb(),c.Wb(),c.Sb(123,"br"),c.Cc(124,M,2,1,"p",52),c.Wb(),c.Cc(125,D,1,0,"cybord-loader",53),c.Xb(126,"div",54),c.Xb(127,"div",55),c.Cc(128,N,3,2,"button",56),c.Cc(129,k,3,2,"button",56),c.Wb(),c.Wb(),c.Wb(),c.Wb(),c.Wb(),c.Wb(),c.Xb(130,"div",57,58),c.Xb(132,"div",59),c.Xb(133,"div",60),c.Xb(134,"div",61),c.Xb(135,"h5",62),c.Dc(136,"Confirmacion"),c.Wb(),c.Xb(137,"button",63),c.ec("click",(function(){return i.decline()})),c.Xb(138,"span",64),c.Dc(139,"\xd7"),c.Wb(),c.Wb(),c.Wb(),c.Xb(140,"div",65),c.Dc(141),c.Wb(),c.Xb(142,"div",66),c.Cc(143,O,2,0,"button",67),c.Cc(144,R,2,0,"button",67),c.Xb(145,"button",68),c.ec("click",(function(){return i.decline()})),c.Dc(146,"no"),c.Wb(),c.Wb(),c.Wb(),c.Wb(),c.Wb()),2&o&&(c.Fb(8),c.mc("ngIf",i.errorMessages.length>0),c.Fb(7),c.mc("ngModel",i.usuario.nombre),c.Fb(5),c.mc("ngModel",i.usuario.email),c.Fb(6),c.mc("checked",i.usuario.activo)("ngModel",i.usuario.activo),c.Fb(7),c.mc("checked","INTERNO"===i.usuario.tipoUsuario),c.Fb(4),c.mc("checked","EXTERNO"===i.usuario.tipoUsuario),c.Fb(7),c.mc("ngModel",i.usuario.noEmpleado),c.Fb(5),c.mc("ngModel",i.usuario.datosUsuario.OFICINA),c.Fb(3),c.mc("ngForOf",i.oficinas),c.Fb(5),c.mc("ngModel",i.usuario.datosUsuario.BANCO),c.Fb(3),c.mc("ngForOf",i.bancos),c.Fb(5),c.mc("ngModel",i.usuario.datosUsuario.TIPO_CUENTA),c.Fb(3),c.mc("ngForOf",i.cuentas),c.Fb(5),c.mc("ngModel",i.usuario.datosUsuario.CUENTA),c.Fb(5),c.mc("ngModel",i.usuario.datosUsuario.SUELDO),c.Fb(5),c.mc("maxDate",i.maxDate)("bsValue",i.antiguedad)("bsConfig",c.oc(42,A)),c.Fb(9),c.mc("ngModel",i.roles.USUARIO)("disabled","administracion"!==i.params.module),c.Fb(4),c.mc("ngModel",i.roles.RECURSOS_HUMANOS)("disabled","administracion"!==i.params.module),c.Fb(4),c.mc("ngModel",i.roles.CONTABILIDAD)("disabled","administracion"!==i.params.module),c.Fb(4),c.mc("ngModel",i.roles.TESORERIA)("disabled","administracion"!==i.params.module),c.Fb(4),c.mc("ngModel",i.roles.GERENCIA_INTERNA)("disabled","administracion"!==i.params.module),c.Fb(4),c.mc("ngModel",i.roles.GERENCIA_EXTERNA)("disabled","administracion"!==i.params.module),c.Fb(4),c.mc("ngModel",i.roles.DIRECCION)("disabled","administracion"!==i.params.module),c.Fb(4),c.mc("ngModel",i.roles.ADMINISTRACION)("disabled","administracion"!==i.params.module),c.Fb(4),c.mc("ngIf",i.params.success.length>0),c.Fb(1),c.mc("ngIf",i.loading),c.Fb(3),c.mc("ngIf",void 0===i.usuario.id),c.Fb(1),c.mc("ngIf",void 0!==i.usuario.id),c.Fb(12),c.Fc(" ",i.mensajeModal," "),c.Fb(2),c.mc("ngIf",void 0!==i.usuario.id),c.Fb(1),c.mc("ngIf",void 0===i.usuario.id))},directives:[r.n,g.b,g.h,g.k,g.a,g.d,g.o,g.l,g.p,r.m,g.e,g.m,m.b,m.a,h.a,f.a],styles:[""]}),o})()}}]);