(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{"aBT+":function(o,i,e){"use strict";e.d(i,"a",(function(){return A}));var t=e("EwKM"),a=e("8Y7J"),n=e("SVse"),s=e("ESM5"),r=e("q+li"),c=e("iInd"),b=e("s7LF"),l=e("jksu");function d(o,i){if(1&o){const o=a.Yb();a.Xb(0,"div",7),a.Xb(1,"label",29),a.Gc(2,"Tipo de Usuario"),a.Wb(),a.Xb(3,"div"),a.Xb(4,"select",30),a.ec("ngModelChange",(function(i){return a.yc(o),a.gc().filterParams.tipoUsuario=i})),a.Xb(5,"option",18),a.Gc(6,"TODOS"),a.Wb(),a.Xb(7,"option",31),a.Gc(8,"INTERNO"),a.Wb(),a.Xb(9,"option",32),a.Gc(10,"EXTERNO"),a.Wb(),a.Wb(),a.Wb(),a.Wb()}if(2&o){const o=a.gc();a.Fb(4),a.nc("ngModel",o.filterParams.tipoUsuario)}}function u(o,i){1&o&&a.Sb(0,"i",33)}function g(o,i){1&o&&(a.Xb(0,"div",34),a.Gc(1," No se encontraron resultados "),a.Wb())}function h(o,i){1&o&&(a.Xb(0,"option",44),a.Gc(1,"20"),a.Wb())}function f(o,i){1&o&&(a.Xb(0,"option",45),a.Gc(1,"50"),a.Wb())}function p(o,i){if(1&o){const o=a.Yb();a.Xb(0,"select",40),a.ec("ngModelChange",(function(i){return a.yc(o),a.gc(2).filterParams.size=i}))("change",(function(i){return a.yc(o),a.gc(2).onChangePageSize(i.target.value)})),a.Xb(1,"option",41),a.Gc(2,"10"),a.Wb(),a.Ec(3,h,2,0,"option",42),a.Ec(4,f,2,0,"option",43),a.Wb()}if(2&o){const o=a.gc(2);a.nc("ngModel",o.filterParams.size),a.Fb(3),a.nc("ngIf",o.page.number<o.page.totalElements/20),a.Fb(1),a.nc("ngIf",o.page.number<o.page.totalElements/50)}}function m(o,i){if(1&o){const o=a.Yb();a.Xb(0,"div",35),a.Xb(1,"button",36),a.ec("click",(function(){return a.yc(o),a.gc().downloadXLSFile()})),a.Sb(2,"i",37),a.Wb(),a.Ec(3,p,5,3,"select",38),a.Xb(4,"strong",39),a.Gc(5," Tama\xf1o Pagina \xa0\xa0\xa0\xa0"),a.Wb(),a.Wb()}if(2&o){const o=a.gc();a.Fb(3),a.nc("ngIf",0==o.page.last||1==o.page.first)}}function v(o,i){1&o&&(a.Xb(0,"td",58),a.Xb(1,"span",60),a.Gc(2,"ACTIVO"),a.Wb(),a.Wb())}function X(o,i){1&o&&(a.Xb(0,"td",58),a.Xb(1,"span",61),a.Gc(2,"INACTIVO"),a.Wb(),a.Wb())}const W=function(o,i){return{"btn-secondary":o,"btn-primary":i}};function E(o,i){if(1&o){const o=a.Yb();a.Xb(0,"tr"),a.Xb(1,"td",50),a.Xb(2,"button",51),a.ec("click",(function(){a.yc(o);const e=i.$implicit;return a.gc(2).redirectToUser(e.id)})),a.Sb(3,"i",52),a.Wb(),a.Xb(4,"button",53),a.ec("click",(function(){a.yc(o);const e=i.$implicit;return a.gc(2).redirectToAdjustment(e.id)})),a.Sb(5,"i",54),a.Wb(),a.Xb(6,"button",53),a.ec("click",(function(){a.yc(o);const e=i.$implicit;return a.gc(2).redirectToAhorro(e.id)})),a.Sb(7,"i",55),a.Wb(),a.Xb(8,"button",53),a.ec("click",(function(){a.yc(o);const e=i.$implicit;return a.gc(2).redirectToPrestamo(e.id)})),a.Sb(9,"i",56),a.Wb(),a.Wb(),a.Xb(10,"td",57),a.Gc(11),a.Wb(),a.Xb(12,"td",58),a.Gc(13),a.Wb(),a.Xb(14,"td",58),a.Gc(15),a.Wb(),a.Xb(16,"td",58),a.Gc(17),a.Wb(),a.Ec(18,v,3,0,"td",59),a.Ec(19,X,3,0,"td",59),a.Wb()}if(2&o){const o=i.$implicit,e=a.gc(2);a.Fb(2),a.nc("disabled","contabilidad"===e.module&&"INTERNO"===o.tipoUsuario)("ngClass",a.rc(8,W,"contabilidad"===e.module&&"INTERNO"===o.tipoUsuario,"contabilidad"!==e.module||"INTERNO"!==o.tipoUsuario)),a.Fb(9),a.Hc(o.noEmpleado),a.Fb(2),a.Hc(o.nombre),a.Fb(2),a.Hc(o.email),a.Fb(2),a.Hc(o.tipoUsuario),a.Fb(1),a.nc("ngIf",!0===o.activo),a.Fb(1),a.nc("ngIf",!1===o.activo)}}function I(o,i){if(1&o){const o=a.Yb();a.Xb(0,"li",67),a.Xb(1,"button",68),a.ec("click",(function(){a.yc(o);const i=a.gc(4);return i.updateDataTable(0,i.page.size)})),a.Sb(2,"i",69),a.Wb(),a.Wb()}}function M(o,i){if(1&o){const o=a.Yb();a.Xb(0,"li",67),a.Xb(1,"button",68),a.ec("click",(function(){a.yc(o);const i=a.gc(4);return i.updateDataTable(i.page.number-1,i.page.size)})),a.Gc(2),a.Wb(),a.Wb()}if(2&o){const o=a.gc(4);a.Fb(2),a.Hc(o.page.number)}}function C(o,i){if(1&o){const o=a.Yb();a.Xb(0,"li",67),a.Xb(1,"button",68),a.ec("click",(function(){a.yc(o);const i=a.gc(4);return i.updateDataTable(i.page.number+1,i.page.size)})),a.Gc(2),a.Wb(),a.Wb()}if(2&o){const o=a.gc(4);a.Fb(2),a.Hc(o.page.number+2)}}function N(o,i){if(1&o){const o=a.Yb();a.Xb(0,"li",67),a.Xb(1,"button",68),a.ec("click",(function(){a.yc(o);const i=a.gc(4);return i.updateDataTable(i.page.totalPages-1,i.page.size)})),a.Sb(2,"i",70),a.Wb(),a.Wb()}}function U(o,i){if(1&o&&(a.Xb(0,"ul",63),a.Ec(1,I,3,0,"li",64),a.Ec(2,M,3,1,"li",64),a.Xb(3,"li",65),a.Xb(4,"a",66),a.Xb(5,"strong"),a.Gc(6),a.Wb(),a.Wb(),a.Wb(),a.Ec(7,C,3,1,"li",64),a.Ec(8,N,3,0,"li",64),a.Wb()),2&o){const o=a.gc(3);a.Fb(1),a.nc("ngIf",0==o.page.first),a.Fb(1),a.nc("ngIf",0==o.page.first),a.Fb(4),a.Hc(o.page.number+1),a.Fb(1),a.nc("ngIf",0==o.page.last),a.Fb(1),a.nc("ngIf",0==o.page.last)}}function y(o,i){if(1&o&&(a.Xb(0,"div",35),a.Ec(1,U,9,5,"ul",62),a.Wb()),2&o){const o=a.gc(2);a.Fb(1),a.nc("ngIf",o.page.totalElements>1)}}function k(o,i){if(1&o&&(a.Xb(0,"div",46),a.Xb(1,"table",47),a.Xb(2,"thead",48),a.Xb(3,"tr"),a.Xb(4,"th"),a.Gc(5,"ACCIONES"),a.Wb(),a.Xb(6,"th"),a.Gc(7,"NO. EMPLEADO"),a.Wb(),a.Xb(8,"th"),a.Gc(9,"NOMBRE"),a.Wb(),a.Xb(10,"th"),a.Gc(11,"CORREO"),a.Wb(),a.Xb(12,"th"),a.Gc(13,"TIPO"),a.Wb(),a.Xb(14,"th"),a.Gc(15,"STATUS"),a.Wb(),a.Wb(),a.Wb(),a.Xb(16,"tbody"),a.Ec(17,E,20,11,"tr",49),a.Wb(),a.Wb(),a.Ec(18,y,2,1,"div",26),a.Wb()),2&o){const o=a.gc();a.Fb(17),a.nc("ngForOf",o.page.content),a.Fb(1),a.nc("ngIf",0==o.page.empty)}}function O(o,i){1&o&&a.Sb(0,"cybord-loader")}let A=(()=>{class o{constructor(o,i,e,a){this.datepipe=o,this.userService=i,this.downloadService=e,this.router=a,this.module="recursos-humanos",this.page=new t.a,this.pageSize="10",this.loading=!1,this.filterParams={email:"",estatus:"*",nombre:"",tipoUsuario:"*",page:"0",size:"10"}}ngOnInit(){this.module=this.router.url.split("/")[1],"recursos-humanos"===this.module&&(this.filterParams.tipoUsuario="INTERNO"),"contabilidad"===this.module&&(this.filterParams.tipoUsuario="EXTERNO"),this.updateDataTable(0,10)}updateDataTable(o,i,e){this.loading=!0,this.filterParams.page=o||0,this.filterParams.size=i||10,this.userService.getUsuarios(this.filterParams).subscribe(o=>{this.page=o,this.loading=!1})}onChangePageSize(o){this.updateDataTable(this.page.number,o)}redirectToUser(o){this.router.navigate([`../${this.module}/usuarios/${o}`])}redirectToAdjustment(o){this.router.navigate(["../contabilidad/ajustes/"+o])}redirectToAhorro(o){this.router.navigate([`../${this.module}/saldo-ahorro/${o}`])}redirectToPrestamo(o){this.router.navigate([`../${this.module}/prestamos-activos/${o}`])}downloadXLSFile(){this.loading=!0,this.filterParams.page="0",this.filterParams.size="100000",this.userService.getUsuariosReport(this.filterParams).subscribe(o=>{this.downloadService.downloadFile(o.dato,`ReporteUsuarios-${this.datepipe.transform(Date.now(),"yyyy-MM-dd")}.xls`,"application/vnd.ms-excel"),this.loading=!1})}}return o.\u0275fac=function(i){return new(i||o)(a.Rb(n.f),a.Rb(s.a),a.Rb(r.a),a.Rb(c.c))},o.\u0275cmp=a.Lb({type:o,selectors:[["cybord-usuarios"]],decls:53,vars:12,consts:[[1,"animated","fadeIn"],[1,"row"],[1,"col-sm-12","col-md-12"],[1,"card"],[1,"card-header"],[1,"card-body"],[1,"row","slide_1"],[1,"col-md-2"],["for","inputCorreo",1,"label"],["type","text","nbInput","","fullWidth","","id","inputCorreo","placeholder","email usuario",1,"form-control",3,"ngModel","disabled","ngModelChange"],[1,"col-md-3"],["for","nombreusuario",1,"label"],["type","text","nbInput","","fullWidth","","id","nombreusu","placeholder","nombre usuario",1,"form-control",3,"ngModel","disabled","ngModelChange"],["class","col-md-2",4,"ngIf"],[1,"col-md-5"],["for","inputActivo",1,"label"],[1,"row","form-inline"],["id","inputActivo","fullWidth","",1,"form-control",2,"display","block",3,"ngModel","ngModelChange"],["value","*"],["value","1"],["value","0"],[1,"btn","btn-primary",3,"disabled","click"],["class","fa fa-spinner fa-spin",4,"ngIf"],[1,"btn","btn-primary",3,"click"],[1,"col"],["class","alert alert-primary","role","alert",4,"ngIf"],["class","clearfix",4,"ngIf"],["class","table-responsive",4,"ngIf"],[4,"ngIf"],["for","tipoUsuario",1,"label"],["id","inputTipoUsuario","fullWidth","",1,"form-control",2,"display","block",3,"ngModel","ngModelChange"],["value","INTERNO"],["value","EXTERNO"],[1,"fa","fa-spinner","fa-spin"],["role","alert",1,"alert","alert-primary"],[1,"clearfix"],[1,"btn-sm","btn-success","float-right",3,"click"],[1,"fa","fa-file-excel-o","fa-sm"],["id","inputunidad","style","display:block;width: 95px; margin-right: 15px;","class","float-right form-control form-control-sm",3,"ngModel","ngModelChange","change",4,"ngIf"],[1,"float-right"],["id","inputunidad",1,"float-right","form-control","form-control-sm",2,"display","block","width","95px","margin-right","15px",3,"ngModel","ngModelChange","change"],["value","10"],["value","20",4,"ngIf"],["value","50",4,"ngIf"],["value","20"],["value","50"],[1,"table-responsive"],[1,"table","table-bordered","table-sm"],[1,"thead-dark"],[4,"ngFor","ngForOf"],["scope","row",1,"text-center"],[1,"btn-sm",3,"disabled","ngClass","click"],[1,"fa","fa-search","fa-sm"],[1,"btn-sm","btn-success",3,"click"],[1,"fa","fa-money","fa-sm"],[1,"fa","fa-bank","fa-sm"],[1,"fa","fa-credit-card","fa-sm"],["scope","row",1,"text-right"],["scope","row"],["scope","row",4,"ngIf"],[1,"badge","badge-success"],[1,"badge","badge-danger"],["class","pagination float-right",4,"ngIf"],[1,"pagination","float-right"],["class","page-item",4,"ngIf"],[1,"page-item","active"],[1,"page-link"],[1,"page-item"],[1,"btn","page-link",3,"click"],[1,"icon-control-rewind","icons"],[1,"icon-control-forward","icons"]],template:function(o,i){1&o&&(a.Xb(0,"div",0),a.Xb(1,"div",1),a.Xb(2,"div",2),a.Xb(3,"div",3),a.Xb(4,"div",4),a.Xb(5,"strong"),a.Gc(6,"Altas y bajas de usuarios - Filtros de busqueda"),a.Wb(),a.Wb(),a.Xb(7,"div",5),a.Xb(8,"div",6),a.Xb(9,"div",7),a.Xb(10,"label",8),a.Gc(11,"Correo Usuario"),a.Wb(),a.Xb(12,"input",9),a.ec("ngModelChange",(function(o){return i.filterParams.email=o})),a.Wb(),a.Wb(),a.Xb(13,"div",10),a.Xb(14,"label",11),a.Gc(15,"Nombre Usuario"),a.Wb(),a.Xb(16,"input",12),a.ec("ngModelChange",(function(o){return i.filterParams.nombre=o})),a.Wb(),a.Wb(),a.Ec(17,d,11,1,"div",13),a.Xb(18,"div",14),a.Xb(19,"label",15),a.Gc(20,"Estatus Usuario"),a.Wb(),a.Xb(21,"div",16),a.Xb(22,"select",17),a.ec("ngModelChange",(function(o){return i.filterParams.estatus=o})),a.Xb(23,"option",18),a.Gc(24,"TODOS"),a.Wb(),a.Xb(25,"option",19),a.Gc(26,"ACTIVO"),a.Wb(),a.Xb(27,"option",20),a.Gc(28,"INACTIVO"),a.Wb(),a.Wb(),a.Xb(29,"p"),a.Gc(30,"\xa0\xa0\xa0\xa0"),a.Wb(),a.Xb(31,"button",21),a.ec("click",(function(){return i.updateDataTable(0,10)})),a.Gc(32,"BUSCAR "),a.Ec(33,u,1,0,"i",22),a.Wb(),a.Xb(34,"p"),a.Gc(35,"\xa0\xa0\xa0\xa0"),a.Wb(),a.Xb(36,"button",23),a.ec("click",(function(){return i.redirectToUser("*")})),a.Gc(37,"NUEVO USUARIO"),a.Wb(),a.Wb(),a.Wb(),a.Wb(),a.Wb(),a.Wb(),a.Wb(),a.Wb(),a.Xb(38,"div",1),a.Xb(39,"div",2),a.Xb(40,"div",3),a.Xb(41,"div",4),a.Xb(42,"strong"),a.Gc(43,"Resultados"),a.Wb(),a.Wb(),a.Xb(44,"div",5),a.Xb(45,"div",1),a.Xb(46,"div",24),a.Ec(47,g,2,0,"div",25),a.Ec(48,m,6,1,"div",26),a.Wb(),a.Wb(),a.Xb(49,"div",1),a.Xb(50,"div",24),a.Ec(51,k,19,2,"div",27),a.Wb(),a.Wb(),a.Wb(),a.Ec(52,O,1,0,"cybord-loader",28),a.Wb(),a.Wb(),a.Wb(),a.Wb()),2&o&&(a.Fb(12),a.nc("ngModel",i.filterParams.email)("disabled",i.filterParams.nombre.length>0),a.Fb(4),a.nc("ngModel",i.filterParams.nombre)("disabled",i.filterParams.email.length>0),a.Fb(1),a.nc("ngIf","recursos-humanos"!=i.module),a.Fb(5),a.nc("ngModel",i.filterParams.estatus),a.Fb(9),a.nc("disabled",i.loading),a.Fb(2),a.nc("ngIf",i.loading),a.Fb(14),a.nc("ngIf",!0===i.page.empty),a.Fb(1),a.nc("ngIf",!1===i.page.empty),a.Fb(3),a.nc("ngIf",0==i.page.empty),a.Fb(1),a.nc("ngIf",i.loading))},directives:[b.b,b.h,b.k,n.n,b.o,b.l,b.p,n.m,n.l,l.a],styles:[""]}),o})()},qZ4S:function(o,i,e){"use strict";e.d(i,"a",(function(){return a}));var t=e("8Y7J");let a=(()=>{class o{constructor(){}validateSaldoPrestamo(o,i){const e=[];return(void 0===o.monto||o.monto<=10)&&e.push("El monto del pago debe ser mayor a $10.00"),null!=o.idPrestamo&&null!==o.idPrestamo||e.push("La referencia del prestamo no ests ligada"),null!=o.origen&&null!==o.origen||e.push("El origen del pago no ha sido especificado"),null!=o.tipo&&null!==o.tipo||e.push("El tipo del pago no ha sido especificado"),e}validateSolicitud(o,i){const e=[];return"RetiroParcialAhorro"===o.tipo&&+o.atributos.MONTO>i&&e.push("No es posible solicitar un monto superior al total de su ahorro de $"+i),void 0===o.atributos.MONTO&&e.push("El monto de la solicitud no ha sido asignado"),"CancelacionAhorro"===o.tipo&&(void 0===o.atributos.RAZON_CANCELACION||o.atributos.RAZON_CANCELACION.length<10)&&e.push("La descripci\xf3n del motivo de cancelaci\xf3n es muy corto"),e}validarUsuario(o){const i=[],e=new RegExp("^([0-9a-zA-Z\xc0-\xfa.,&-_ ]+)$"),t=new RegExp("^([0-9]{8,20})$");return(!new RegExp("^[a-z0-9A-Z._%+-]+@[a-z0-9.-]+\\.[a-z]{2,4}$").test(o.email)||void 0===o.email)&&o.email.length<2&&o.email.length>100&&i.push("El email no es valido"),(!e.test(o.nombre)||void 0===o.nombre||o.nombre.length<2||o.nombre.length>100)&&i.push("El nombre no es valido"),void 0===o.noEmpleado&&i.push("El No. de empleado no ha sido asignado"),"*"!==o.datosUsuario.OFICINA&&void 0!==o.datosUsuario.OFICINA||i.push("La oficina no ha sido asignado"),"*"!==o.datosUsuario.BANCO&&void 0!==o.datosUsuario.BANCO||i.push("El banco no ha sido asignado"),"*"!==o.datosUsuario.TIPO_CUENTA&&void 0!==o.datosUsuario.TIPO_CUENTA||i.push("El tipo de cuenta no esta definido"),t.test(o.datosUsuario.CUENTA)||i.push("El no. de cuenta es invalido"),Number(o.datosUsuario.SUELDO)<100&&i.push("El saldo no es valido (MENOR A 100)"),i}}return o.\u0275fac=function(i){return new(i||o)},o.\u0275prov=t.Nb({token:o,factory:o.\u0275fac,providedIn:"root"}),o})()},uwdg:function(o,i,e){"use strict";e.d(i,"a",(function(){return F}));var t=e("mrSG");class a{constructor(o,i,e){this.tipoDato=o,this.dato=i,this.relevancia=e||0}}var n=e("KZhB");class s{constructor(o){this.nombre=o}}var r=e("8Y7J"),c=e("SVse"),b=e("iInd"),l=e("4ujS"),d=e("ESM5"),u=e("qZ4S"),g=e("s7LF"),h=e("ienR"),f=e("LqlI"),p=e("jksu");const m=["modalConfirmacion"];function v(o,i){if(1&o&&(r.Xb(0,"p"),r.Gc(1),r.Wb()),2&o){const o=i.$implicit;r.Fb(1),r.Hc(o)}}function X(o,i){if(1&o&&(r.Xb(0,"div",74),r.Ec(1,v,2,1,"p",75),r.Wb()),2&o){const o=r.gc();r.Fb(1),r.nc("ngForOf",o.errorMessages)}}function W(o,i){if(1&o&&(r.Xb(0,"option",76),r.Gc(1),r.Wb()),2&o){const o=i.$implicit;r.nc("value",o.nombre),r.Fb(1),r.Hc(o.valor)}}function E(o,i){if(1&o&&(r.Xb(0,"option",76),r.Gc(1),r.Wb()),2&o){const o=i.$implicit;r.nc("value",o.nombre),r.Fb(1),r.Hc(o.valor)}}function I(o,i){if(1&o&&(r.Xb(0,"option",76),r.Gc(1),r.Wb()),2&o){const o=i.$implicit;r.nc("value",o.nombre),r.Fb(1),r.Hc(o.valor)}}function M(o,i){if(1&o&&(r.Xb(0,"p",77),r.Gc(1),r.Wb()),2&o){const o=r.gc();r.Fb(1),r.Hc(o.params.success)}}function C(o,i){1&o&&r.Sb(0,"cybord-loader")}function N(o,i){1&o&&r.Sb(0,"i",80)}function U(o,i){if(1&o){const o=r.Yb();r.Xb(0,"button",78),r.ec("click",(function(){return r.yc(o),r.gc().openModal()})),r.Gc(1," Registrar "),r.Ec(2,N,1,0,"i",79),r.Wb()}if(2&o){const o=r.gc();r.nc("disabled",o.loading),r.Fb(2),r.nc("ngIf",o.loading)}}function y(o,i){1&o&&r.Sb(0,"i",80)}function k(o,i){if(1&o){const o=r.Yb();r.Xb(0,"button",78),r.ec("click",(function(){return r.yc(o),r.gc().openModal()})),r.Gc(1," Actualizar "),r.Ec(2,y,1,0,"i",79),r.Wb()}if(2&o){const o=r.gc();r.nc("disabled",o.loading),r.Fb(2),r.nc("ngIf",o.loading)}}function O(o,i){if(1&o){const o=r.Yb();r.Xb(0,"button",81),r.ec("click",(function(){return r.yc(o),r.gc().update()})),r.Gc(1,"Si"),r.Wb()}}function A(o,i){if(1&o){const o=r.Yb();r.Xb(0,"button",81),r.ec("click",(function(){return r.yc(o),r.gc().register()})),r.Gc(1,"Si"),r.Wb()}}const R=function(){return{dateInputFormat:"DD/MM/YYYY"}};let F=(()=>{class o{constructor(o,i,e,t,a,s){this.datepipe=o,this.route=i,this.catService=e,this.usuarioServicio=t,this.router=a,this.validationService=s,this.submitted=!1,this.loading=!1,this.usuario=new n.a,this.errorMessages=[],this.mensajeModal="",this.params={success:"",message:"",id:"*",module:"usuarios",interno:!1},this.oficinas=[],this.bancos=[],this.cuentas=[],this.roles={USUARIO:!0,RECURSOS_HUMANOS:!1,TESORERIA:!1,CONTABILIDAD:!1,GERENCIA_INTERNA:!1,GERENCIA_EXTERNA:!1,ADMINISTRACION:!1,DIRECCION:!1},this.nombreRoles=Object.keys(this.roles)}ngOnInit(){this.maxDate=new Date,this.loading=!0,this.errorMessages=[],this.params.module=this.router.url.split("/")[1],this.antiguedad=new Date,this.catService.getCatalogosByTipo("oficinas").subscribe(o=>this.oficinas=o),this.catService.getCatalogosByTipo("bancos").subscribe(o=>this.bancos=o),this.catService.getCatalogosByTipo("tipo-cuenta").subscribe(o=>this.cuentas=o),this.route.paramMap.subscribe(o=>{const i=o.get("idUsuario");"*"!==i?(this.updateUserInfo(+i),this.loading=!1):(this.antiguedad=new Date,this.loading=!1)})}updateUserInfo(o){return Object(t.a)(this,void 0,void 0,(function*(){try{this.usuario=yield this.usuarioServicio.getUsuario(o).toPromise(),this.antiguedad=new Date(this.usuario.datosUsuario.ANTIGUEDAD);for(const o of this.usuario.roles)this.roles[o]=!0}catch(i){this.loading=!1,this.errorMessages.push(i)}}))}toggleUserType(){this.usuario.tipoUsuario="INTERNO"===this.usuario.tipoUsuario?"EXTERNO":"INTERNO"}openModal(){this.mensajeModal=void 0!==this.usuario.id?"\xbfActualizar usuario?":"\xbfRegistrar usuario?",this.modalConfirmacion.show()}decline(){this.modalConfirmacion.hide()}update(){this.errorMessages=[],this.loading=!0,this.modalConfirmacion.hide(),this.errorMessages=this.validationService.validarUsuario(this.usuario),this.errorMessages.length>0?this.loading=!1:this.usuarioServicio.actualizaUser(this.usuario).toPromise().then(o=>Object(t.a)(this,void 0,void 0,(function*(){void 0!==this.usuario.datosUsuario.ANTIGUEDAD&&(this.usuario.datosUsuario.ANTIGUEDAD=this.datepipe.transform(this.antiguedad,"yyyy-MM-dd"));for(const e in this.usuario.datosUsuario)if(void 0!==e&&void 0!==this.usuario.datosUsuario[e]&&""!==this.usuario.datosUsuario[e]&&null!==this.usuario.datosUsuario[e]&&o.datosUsuario[e]!==this.usuario.datosUsuario[e]){const o=new a(e,this.usuario.datosUsuario[e]);yield this.usuarioServicio.actualizaDatoUsuario(this.usuario.id,e,o).toPromise()}if("administracion"===this.params.module){console.log("Updating user roles");var i=0;for(const o in this.roles)!1===this.roles[o]&&this.usuario.roles.find(i=>i===o)&&(yield this.usuarioServicio.deleteRoles(this.usuario.id,this.nombreRoles[i]).toPromise()),i++;for(const o in this.roles)!0!==this.roles[o]||this.usuario.roles.find(i=>i===o)||(yield this.usuarioServicio.insertarRoles(this.usuario.id,new s(o)).toPromise())}this.submitted=!0,this.params.success="El usuario ha sido actualizado satisfactoriamente."}))).then(()=>this.router.navigate([`../${this.params.module}/usuarios`])).catch(o=>{this.errorMessages.push(o),this.loading=!1})}register(){this.errorMessages=[];let o=0;this.loading=!0,this.modalConfirmacion.hide(),this.errorMessages=this.validationService.validarUsuario(this.usuario),this.errorMessages.length>0&&(this.loading=!1),console.log("registering"),this.usuario.datosUsuario.ANTIGUEDAD=this.datepipe.transform(this.antiguedad,"yyyy-MM-dd"),this.usuarioServicio.insertarUsuario(this.usuario).toPromise().then(i=>Object(t.a)(this,void 0,void 0,(function*(){o=i.id;for(const o in this.usuario.datosUsuario)if(void 0!==o&&void 0!==this.usuario.datosUsuario[o]){const e=this.usuario.datosUsuario[o];yield this.usuarioServicio.insertarDatoUsuario(i.id,new a(o,e)).toPromise()}for(const o in this.roles)!0===this.roles[o]&&(yield this.usuarioServicio.insertarRoles(i.id,new s(o)).toPromise());this.submitted=!0}))).then(()=>this.router.navigate([`../${this.params.module}/usuarios`])).catch(o=>{this.errorMessages.push(o),this.loading=!1})}updateRoles(){return Object(t.a)(this,void 0,void 0,(function*(){for(const o in this.roles)!1===this.roles[o]&&this.usuario.roles.find(i=>i===o)&&(yield this.usuarioServicio.deleteRoles(this.usuario.id,this.roles[o]).toPromise());for(const o in this.roles)!0!==this.roles[o]||this.usuario.roles.find(i=>i===o)||(yield this.usuarioServicio.insertarRoles(this.usuario.id,new s(o)).toPromise())}))}clearInput(){this.usuario=new n.a,this.params.success="",this.errorMessages=[],this.submitted=!1}}return o.\u0275fac=function(i){return new(i||o)(r.Rb(c.f),r.Rb(b.a),r.Rb(l.a),r.Rb(d.a),r.Rb(b.c),r.Rb(u.a))},o.\u0275cmp=r.Lb({type:o,selectors:[["cybord-usuario"]],viewQuery:function(o,i){var e;1&o&&r.Lc(m,!0),2&o&&r.uc(e=r.fc())&&(i.modalConfirmacion=e.first)},decls:160,vars:44,consts:[[1,"animated","fadeIn"],[1,"row"],[1,"col-sm-12","col-md-12"],[1,"card"],[1,"card-header"],[1,"card-body"],["class","alert alert-warning","role","alert",4,"ngIf"],[1,"col-xs-12","col-sm-12","col-md-8"],[1,"form-group","row"],[1,"col-md-3","col-form-label"],[1,"col-md-9"],["type","text","placeholder","Sobrenombre o alias",1,"form-control",3,"ngModel","ngModelChange"],["type","text","placeholder","Correo Electronico",1,"form-control",3,"ngModel","ngModelChange"],[1,"col-md-7"],[1,"switch","switch-label","switch-primary"],["type","checkbox",1,"switch-input",3,"checked","ngModel","ngModelChange"],["data-checked","ON","data-unchecked","OFF",1,"switch-slider"],[1,"col-md-7","col-form-label"],[1,"form-check"],["type","radio","name","tipo","id","radio3","value","INTERNO",1,"form-check-input",3,"checked","click"],["for","radio3",1,"form-check-label"],["type","radio","name","tipo","id","radio4","value","EXTERNO",1,"form-check-input",3,"checked","click"],["for","radio4",1,"form-check-label"],["type","text","id","no-emp","name","text-inputa","maxlength","10","placeholder","No empleado",1,"form-control",3,"ngModel","ngModelChange"],["id","office","name","office",1,"form-control",3,"ngModel","ngModelChange"],["value","*"],[3,"value",4,"ngFor","ngForOf"],["id","bank","name","bank",1,"form-control",3,"ngModel","ngModelChange"],["id","account","name","account",1,"form-control",3,"ngModel","ngModelChange"],["type","text","id","no-account","name","account","maxlength","20","minlength","8","placeholder","0000 0000 0000 0000",1,"form-control",3,"ngModel","ngModelChange"],["type","number","id","quantity","name","text-inputafg","min","1","placeholder","1.00",1,"form-control",3,"ngModel","ngModelChange"],["id","start-date","type","text","bsDatepicker","",1,"form-control",3,"maxDate","bsValue","bsConfig","maxDateChange","bsValueChange"],["dp","bsDatepicker"],["id","noAvles","name","noAvles",1,"form-control",3,"ngModel","ngModelChange"],["value","1"],["value","2"],["value","3"],["value","4"],[1,"col-xs-12","col-sm-12","col-md-4"],[1,"col-md-9","col-form-label"],["type","checkbox","value","option1","id","checkbox1",1,"form-check-input",3,"ngModel","disabled","ngModelChange"],["for","checkbox1",1,"form-check-label"],["type","checkbox","value","option1","id","checkbox2",1,"form-check-input",3,"ngModel","disabled","ngModelChange"],["for","checkbox2",1,"form-check-label"],[1,"form-check","checkbox"],["type","checkbox","value","option1","id","checkbox3",1,"form-check-input",3,"ngModel","disabled","ngModelChange"],["for","checkbox3",1,"form-check-label"],["type","checkbox","value","option1","id","checkbox4",1,"form-check-input",3,"ngModel","disabled","ngModelChange"],["for","checkbox4",1,"form-check-label"],["type","checkbox","value","option1","id","checkbox5",1,"form-check-input",3,"ngModel","disabled","ngModelChange"],["for","checkbox5",1,"form-check-label"],["type","checkbox","value","option1","id","checkbox8",1,"form-check-input",3,"ngModel","disabled","ngModelChange"],["for","checkbox8",1,"form-check-label"],["type","checkbox","value","option1","id","checkbox7",1,"form-check-input",3,"ngModel","disabled","ngModelChange"],["for","checkbox7",1,"form-check-label"],["type","checkbox","value","option1","id","checkbox6",1,"form-check-input",3,"ngModel","disabled","ngModelChange"],["for","checkbox6",1,"form-check-label"],["class","alert alert-success","role","alert",4,"ngIf"],[4,"ngIf"],[1,"card-footer"],[1,"float-right","slide_2"],["class","btn btn-primary",3,"disabled","click",4,"ngIf"],["bsModal","","id","modalConfirmacion","tabindex","-1","role","dialog","aria-labelledby","modalConfirmacion","aria-hidden","true",1,"modal","fade"],["modalConfirmacion","bs-modal"],["role","document",1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],["id","modalConfirmacionLabel",1,"modal-title"],["type","button","data-dismiss","modal","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"modal-footer"],["type","button","class","btn btn-primary",3,"click",4,"ngIf"],["type","button",1,"btn","btn-secondary",3,"click"],["role","alert",1,"alert","alert-warning"],[4,"ngFor","ngForOf"],[3,"value"],["role","alert",1,"alert","alert-success"],[1,"btn","btn-primary",3,"disabled","click"],["class","fa fa-spinner fa-spin",4,"ngIf"],[1,"fa","fa-spinner","fa-spin"],["type","button",1,"btn","btn-primary",3,"click"]],template:function(o,i){1&o&&(r.Xb(0,"div",0),r.Xb(1,"div",1),r.Xb(2,"div",2),r.Xb(3,"div",3),r.Xb(4,"div",4),r.Xb(5,"strong"),r.Gc(6,"Usuarios"),r.Wb(),r.Wb(),r.Xb(7,"div",5),r.Ec(8,X,2,1,"div",6),r.Xb(9,"div",1),r.Xb(10,"div",7),r.Xb(11,"div",8),r.Xb(12,"strong",9),r.Gc(13,"Nombre"),r.Wb(),r.Xb(14,"div",10),r.Xb(15,"input",11),r.ec("ngModelChange",(function(o){return i.usuario.nombre=o})),r.Wb(),r.Wb(),r.Wb(),r.Xb(16,"div",8),r.Xb(17,"strong",9),r.Gc(18,"Email"),r.Wb(),r.Xb(19,"div",10),r.Xb(20,"input",12),r.ec("ngModelChange",(function(o){return i.usuario.email=o})),r.Wb(),r.Wb(),r.Wb(),r.Xb(21,"div",8),r.Xb(22,"strong",9),r.Gc(23,"Usuario activo"),r.Wb(),r.Xb(24,"div",13),r.Xb(25,"label",14),r.Xb(26,"input",15),r.ec("ngModelChange",(function(o){return i.usuario.activo=o})),r.Wb(),r.Sb(27,"span",16),r.Wb(),r.Wb(),r.Wb(),r.Xb(28,"div",8),r.Xb(29,"strong",9),r.Gc(30,"Tipo Usuario"),r.Wb(),r.Xb(31,"div",17),r.Xb(32,"div",18),r.Xb(33,"input",19),r.ec("click",(function(){return i.toggleUserType()})),r.Wb(),r.Xb(34,"label",20),r.Gc(35," INTERNO "),r.Wb(),r.Wb(),r.Xb(36,"div",18),r.Xb(37,"input",21),r.ec("click",(function(){return i.toggleUserType()})),r.Wb(),r.Xb(38,"label",22),r.Gc(39," EXTERNO "),r.Wb(),r.Wb(),r.Wb(),r.Wb(),r.Xb(40,"div",8),r.Xb(41,"strong",9),r.Gc(42,"No. Empleado"),r.Wb(),r.Xb(43,"div",10),r.Xb(44,"input",23),r.ec("ngModelChange",(function(o){return i.usuario.noEmpleado=o})),r.Wb(),r.Wb(),r.Wb(),r.Xb(45,"div",8),r.Xb(46,"strong",9),r.Gc(47,"Oficina"),r.Wb(),r.Xb(48,"div",13),r.Xb(49,"select",24),r.ec("ngModelChange",(function(o){return i.usuario.datosUsuario.OFICINA=o})),r.Xb(50,"option",25),r.Gc(51,"Seleccionar"),r.Wb(),r.Ec(52,W,2,2,"option",26),r.Wb(),r.Wb(),r.Wb(),r.Xb(53,"div",8),r.Xb(54,"strong",9),r.Gc(55,"BANCO"),r.Wb(),r.Xb(56,"div",13),r.Xb(57,"select",27),r.ec("ngModelChange",(function(o){return i.usuario.datosUsuario.BANCO=o})),r.Xb(58,"option",25),r.Gc(59,"Seleccionar"),r.Wb(),r.Ec(60,E,2,2,"option",26),r.Wb(),r.Wb(),r.Wb(),r.Xb(61,"div",8),r.Xb(62,"strong",9),r.Gc(63,"TIPO CUENTA"),r.Wb(),r.Xb(64,"div",13),r.Xb(65,"select",28),r.ec("ngModelChange",(function(o){return i.usuario.datosUsuario.TIPO_CUENTA=o})),r.Xb(66,"option",25),r.Gc(67,"Seleccionar"),r.Wb(),r.Ec(68,I,2,2,"option",26),r.Wb(),r.Wb(),r.Wb(),r.Xb(69,"div",8),r.Xb(70,"strong",9),r.Gc(71,"No. Cuenta"),r.Wb(),r.Xb(72,"div",10),r.Xb(73,"input",29),r.ec("ngModelChange",(function(o){return i.usuario.datosUsuario.CUENTA=o})),r.Wb(),r.Wb(),r.Wb(),r.Xb(74,"div",8),r.Xb(75,"strong",9),r.Gc(76,"Sueldo"),r.Wb(),r.Xb(77,"div",13),r.Xb(78,"input",30),r.ec("ngModelChange",(function(o){return i.usuario.datosUsuario.SUELDO=o})),r.Wb(),r.Wb(),r.Wb(),r.Xb(79,"div",8),r.Xb(80,"strong",9),r.Gc(81,"Fecha Antiguedad"),r.Wb(),r.Xb(82,"div",13),r.Xb(83,"input",31,32),r.ec("maxDateChange",(function(o){return i.maxDate=o}))("bsValueChange",(function(o){return i.antiguedad=o})),r.Wb(),r.Wb(),r.Wb(),r.Xb(85,"div",8),r.Xb(86,"strong",9),r.Gc(87,"Maximo No. avales"),r.Wb(),r.Xb(88,"div",13),r.Xb(89,"select",33),r.ec("ngModelChange",(function(o){return i.usuario.datosUsuario.NO_AVALES=o})),r.Xb(90,"option",34),r.Gc(91,"1 avales"),r.Wb(),r.Xb(92,"option",35),r.Gc(93,"2 avales"),r.Wb(),r.Xb(94,"option",36),r.Gc(95,"3 avales"),r.Wb(),r.Xb(96,"option",37),r.Gc(97,"4 avales"),r.Wb(),r.Wb(),r.Wb(),r.Wb(),r.Wb(),r.Xb(98,"div",38),r.Xb(99,"div",8),r.Xb(100,"label",9),r.Xb(101,"strong"),r.Gc(102,"Roles"),r.Wb(),r.Wb(),r.Xb(103,"div",39),r.Xb(104,"div",18),r.Xb(105,"input",40),r.ec("ngModelChange",(function(o){return i.roles.USUARIO=o})),r.Wb(),r.Xb(106,"label",41),r.Gc(107," USUARIO "),r.Wb(),r.Wb(),r.Xb(108,"div",18),r.Xb(109,"input",42),r.ec("ngModelChange",(function(o){return i.roles.RECURSOS_HUMANOS=o})),r.Wb(),r.Xb(110,"label",43),r.Gc(111," RECURSOS HUMANOS "),r.Wb(),r.Wb(),r.Xb(112,"div",44),r.Xb(113,"input",45),r.ec("ngModelChange",(function(o){return i.roles.CONTABILIDAD=o})),r.Wb(),r.Xb(114,"label",46),r.Gc(115," CONTABILIDAD "),r.Wb(),r.Wb(),r.Xb(116,"div",44),r.Xb(117,"input",47),r.ec("ngModelChange",(function(o){return i.roles.TESORERIA=o})),r.Wb(),r.Xb(118,"label",48),r.Gc(119," TESORERIA "),r.Wb(),r.Wb(),r.Xb(120,"div",44),r.Xb(121,"input",49),r.ec("ngModelChange",(function(o){return i.roles.GERENCIA_INTERNA=o})),r.Wb(),r.Xb(122,"label",50),r.Gc(123," GERENCIA INTERNA "),r.Wb(),r.Wb(),r.Xb(124,"div",44),r.Xb(125,"input",51),r.ec("ngModelChange",(function(o){return i.roles.GERENCIA_EXTERNA=o})),r.Wb(),r.Xb(126,"label",52),r.Gc(127," GERENCIA EXTERNA "),r.Wb(),r.Wb(),r.Xb(128,"div",44),r.Xb(129,"input",53),r.ec("ngModelChange",(function(o){return i.roles.DIRECCION=o})),r.Wb(),r.Xb(130,"label",54),r.Gc(131," DIRECCION "),r.Wb(),r.Wb(),r.Xb(132,"div",44),r.Xb(133,"input",55),r.ec("ngModelChange",(function(o){return i.roles.ADMINISTRACION=o})),r.Wb(),r.Xb(134,"label",56),r.Gc(135," ADMINISTRACION "),r.Wb(),r.Wb(),r.Wb(),r.Wb(),r.Wb(),r.Wb(),r.Sb(136,"br"),r.Ec(137,M,2,1,"p",57),r.Wb(),r.Ec(138,C,1,0,"cybord-loader",58),r.Xb(139,"div",59),r.Xb(140,"div",60),r.Ec(141,U,3,2,"button",61),r.Ec(142,k,3,2,"button",61),r.Wb(),r.Wb(),r.Wb(),r.Wb(),r.Wb(),r.Wb(),r.Xb(143,"div",62,63),r.Xb(145,"div",64),r.Xb(146,"div",65),r.Xb(147,"div",66),r.Xb(148,"h5",67),r.Gc(149,"Confirmacion"),r.Wb(),r.Xb(150,"button",68),r.ec("click",(function(){return i.decline()})),r.Xb(151,"span",69),r.Gc(152,"\xd7"),r.Wb(),r.Wb(),r.Wb(),r.Xb(153,"div",70),r.Gc(154),r.Wb(),r.Xb(155,"div",71),r.Ec(156,O,2,0,"button",72),r.Ec(157,A,2,0,"button",72),r.Xb(158,"button",73),r.ec("click",(function(){return i.decline()})),r.Gc(159,"no"),r.Wb(),r.Wb(),r.Wb(),r.Wb(),r.Wb()),2&o&&(r.Fb(8),r.nc("ngIf",i.errorMessages.length>0),r.Fb(7),r.nc("ngModel",i.usuario.nombre),r.Fb(5),r.nc("ngModel",i.usuario.email),r.Fb(6),r.nc("checked",i.usuario.activo)("ngModel",i.usuario.activo),r.Fb(7),r.nc("checked","INTERNO"===i.usuario.tipoUsuario),r.Fb(4),r.nc("checked","EXTERNO"===i.usuario.tipoUsuario),r.Fb(7),r.nc("ngModel",i.usuario.noEmpleado),r.Fb(5),r.nc("ngModel",i.usuario.datosUsuario.OFICINA),r.Fb(3),r.nc("ngForOf",i.oficinas),r.Fb(5),r.nc("ngModel",i.usuario.datosUsuario.BANCO),r.Fb(3),r.nc("ngForOf",i.bancos),r.Fb(5),r.nc("ngModel",i.usuario.datosUsuario.TIPO_CUENTA),r.Fb(3),r.nc("ngForOf",i.cuentas),r.Fb(5),r.nc("ngModel",i.usuario.datosUsuario.CUENTA),r.Fb(5),r.nc("ngModel",i.usuario.datosUsuario.SUELDO),r.Fb(5),r.nc("maxDate",i.maxDate)("bsValue",i.antiguedad)("bsConfig",r.pc(43,R)),r.Fb(6),r.nc("ngModel",i.usuario.datosUsuario.NO_AVALES),r.Fb(16),r.nc("ngModel",i.roles.USUARIO)("disabled","administracion"!==i.params.module),r.Fb(4),r.nc("ngModel",i.roles.RECURSOS_HUMANOS)("disabled","administracion"!==i.params.module),r.Fb(4),r.nc("ngModel",i.roles.CONTABILIDAD)("disabled","administracion"!==i.params.module),r.Fb(4),r.nc("ngModel",i.roles.TESORERIA)("disabled","administracion"!==i.params.module),r.Fb(4),r.nc("ngModel",i.roles.GERENCIA_INTERNA)("disabled","administracion"!==i.params.module),r.Fb(4),r.nc("ngModel",i.roles.GERENCIA_EXTERNA)("disabled","administracion"!==i.params.module),r.Fb(4),r.nc("ngModel",i.roles.DIRECCION)("disabled","administracion"!==i.params.module),r.Fb(4),r.nc("ngModel",i.roles.ADMINISTRACION)("disabled","administracion"!==i.params.module),r.Fb(4),r.nc("ngIf",i.params.success.length>0),r.Fb(1),r.nc("ngIf",i.loading),r.Fb(3),r.nc("ngIf",void 0===i.usuario.id),r.Fb(1),r.nc("ngIf",void 0!==i.usuario.id),r.Fb(12),r.Ic(" ",i.mensajeModal," "),r.Fb(2),r.nc("ngIf",void 0!==i.usuario.id),r.Fb(1),r.nc("ngIf",void 0===i.usuario.id))},directives:[c.n,g.b,g.h,g.k,g.a,g.d,g.o,g.l,g.p,c.m,g.e,g.m,h.b,h.a,f.a,p.a],styles:[""]}),o})()}}]);