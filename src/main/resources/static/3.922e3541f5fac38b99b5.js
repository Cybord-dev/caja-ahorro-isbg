(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{"aBT+":function(o,i,e){"use strict";e.d(i,"a",(function(){return R}));var t=e("EwKM"),n=e("8Y7J"),a=e("SVse"),s=e("ESM5"),c=e("q+li"),r=e("iInd"),b=e("s7LF"),l=e("jksu");function d(o,i){if(1&o){const o=n.Yb();n.Xb(0,"div",7),n.Xb(1,"label",29),n.Gc(2,"Tipo de Usuario"),n.Wb(),n.Xb(3,"div"),n.Xb(4,"select",30),n.ec("ngModelChange",(function(i){return n.yc(o),n.gc().filterParams.tipoUsuario=i})),n.Xb(5,"option",18),n.Gc(6,"TODOS"),n.Wb(),n.Xb(7,"option",31),n.Gc(8,"INTERNO"),n.Wb(),n.Xb(9,"option",32),n.Gc(10,"EXTERNO"),n.Wb(),n.Wb(),n.Wb(),n.Wb()}if(2&o){const o=n.gc();n.Fb(4),n.nc("ngModel",o.filterParams.tipoUsuario)}}function u(o,i){1&o&&n.Sb(0,"i",33)}function g(o,i){1&o&&(n.Xb(0,"div",34),n.Gc(1," No se encontraron resultados "),n.Wb())}function h(o,i){1&o&&(n.Xb(0,"option",44),n.Gc(1,"20"),n.Wb())}function f(o,i){1&o&&(n.Xb(0,"option",45),n.Gc(1,"50"),n.Wb())}function m(o,i){if(1&o){const o=n.Yb();n.Xb(0,"select",40),n.ec("ngModelChange",(function(i){return n.yc(o),n.gc(2).filterParams.size=i}))("change",(function(i){return n.yc(o),n.gc(2).onChangePageSize(i.target.value)})),n.Xb(1,"option",41),n.Gc(2,"10"),n.Wb(),n.Ec(3,h,2,0,"option",42),n.Ec(4,f,2,0,"option",43),n.Wb()}if(2&o){const o=n.gc(2);n.nc("ngModel",o.filterParams.size),n.Fb(3),n.nc("ngIf",o.page.number<o.page.totalElements/20),n.Fb(1),n.nc("ngIf",o.page.number<o.page.totalElements/50)}}function p(o,i){if(1&o){const o=n.Yb();n.Xb(0,"div",35),n.Xb(1,"button",36),n.ec("click",(function(){return n.yc(o),n.gc().downloadXLSFile()})),n.Sb(2,"i",37),n.Wb(),n.Ec(3,m,5,3,"select",38),n.Xb(4,"strong",39),n.Gc(5," Tama\xf1o Pagina \xa0\xa0\xa0\xa0"),n.Wb(),n.Wb()}if(2&o){const o=n.gc();n.Fb(3),n.nc("ngIf",0==o.page.last||1==o.page.first)}}function X(o,i){if(1&o){const o=n.Yb();n.Xb(0,"button",54),n.ec("click",(function(){n.yc(o);const i=n.gc().$implicit;return n.gc(2).redirectToAdjustment(i.id)})),n.Sb(1,"i",59),n.Wb()}}function v(o,i){1&o&&(n.Xb(0,"td",57),n.Xb(1,"span",60),n.Gc(2,"ACTIVO"),n.Wb(),n.Wb())}function W(o,i){1&o&&(n.Xb(0,"td",57),n.Xb(1,"span",61),n.Gc(2,"INACTIVO"),n.Wb(),n.Wb())}const E=function(o,i){return{"btn-secondary":o,"btn-primary":i}};function I(o,i){if(1&o){const o=n.Yb();n.Xb(0,"tr"),n.Xb(1,"td",50),n.Xb(2,"button",51),n.ec("click",(function(){n.yc(o);const e=i.$implicit;return n.gc(2).redirectToUser(e.id)})),n.Sb(3,"i",52),n.Wb(),n.Ec(4,X,2,0,"button",53),n.Xb(5,"button",54),n.ec("click",(function(){n.yc(o);const e=i.$implicit;return n.gc(2).redirectToSaldos(e.id)})),n.Sb(6,"i",55),n.Wb(),n.Wb(),n.Xb(7,"td",56),n.Gc(8),n.Wb(),n.Xb(9,"td",57),n.Gc(10),n.Wb(),n.Xb(11,"td",57),n.Gc(12),n.Wb(),n.Xb(13,"td",57),n.Gc(14),n.Wb(),n.Ec(15,v,3,0,"td",58),n.Ec(16,W,3,0,"td",58),n.Wb()}if(2&o){const o=i.$implicit,e=n.gc(2);n.Fb(2),n.nc("disabled","contabilidad"===e.module&&"INTERNO"===o.tipoUsuario)("ngClass",n.rc(9,E,"contabilidad"===e.module&&"INTERNO"===o.tipoUsuario,"contabilidad"!==e.module||"INTERNO"!==o.tipoUsuario)),n.Fb(2),n.nc("ngIf","contabilidad"===e.module),n.Fb(4),n.Hc(o.noEmpleado),n.Fb(2),n.Hc(o.nombre),n.Fb(2),n.Hc(o.email),n.Fb(2),n.Hc(o.tipoUsuario),n.Fb(1),n.nc("ngIf",!0===o.activo),n.Fb(1),n.nc("ngIf",!1===o.activo)}}function M(o,i){if(1&o){const o=n.Yb();n.Xb(0,"li",67),n.Xb(1,"button",68),n.ec("click",(function(){n.yc(o);const i=n.gc(4);return i.updateDataTable(0,i.page.size)})),n.Sb(2,"i",69),n.Wb(),n.Wb()}}function C(o,i){if(1&o){const o=n.Yb();n.Xb(0,"li",67),n.Xb(1,"button",68),n.ec("click",(function(){n.yc(o);const i=n.gc(4);return i.updateDataTable(i.page.number-1,i.page.size)})),n.Gc(2),n.Wb(),n.Wb()}if(2&o){const o=n.gc(4);n.Fb(2),n.Hc(o.page.number)}}function N(o,i){if(1&o){const o=n.Yb();n.Xb(0,"li",67),n.Xb(1,"button",68),n.ec("click",(function(){n.yc(o);const i=n.gc(4);return i.updateDataTable(i.page.number+1,i.page.size)})),n.Gc(2),n.Wb(),n.Wb()}if(2&o){const o=n.gc(4);n.Fb(2),n.Hc(o.page.number+2)}}function U(o,i){if(1&o){const o=n.Yb();n.Xb(0,"li",67),n.Xb(1,"button",68),n.ec("click",(function(){n.yc(o);const i=n.gc(4);return i.updateDataTable(i.page.totalPages-1,i.page.size)})),n.Sb(2,"i",70),n.Wb(),n.Wb()}}function O(o,i){if(1&o&&(n.Xb(0,"ul",63),n.Ec(1,M,3,0,"li",64),n.Ec(2,C,3,1,"li",64),n.Xb(3,"li",65),n.Xb(4,"a",66),n.Xb(5,"strong"),n.Gc(6),n.Wb(),n.Wb(),n.Wb(),n.Ec(7,N,3,1,"li",64),n.Ec(8,U,3,0,"li",64),n.Wb()),2&o){const o=n.gc(3);n.Fb(1),n.nc("ngIf",0==o.page.first),n.Fb(1),n.nc("ngIf",0==o.page.first),n.Fb(4),n.Hc(o.page.number+1),n.Fb(1),n.nc("ngIf",0==o.page.last),n.Fb(1),n.nc("ngIf",0==o.page.last)}}function k(o,i){if(1&o&&(n.Xb(0,"div",35),n.Ec(1,O,9,5,"ul",62),n.Wb()),2&o){const o=n.gc(2);n.Fb(1),n.nc("ngIf",o.page.totalElements>1)}}function y(o,i){if(1&o&&(n.Xb(0,"div",46),n.Xb(1,"table",47),n.Xb(2,"thead",48),n.Xb(3,"tr"),n.Xb(4,"th"),n.Gc(5,"ACCIONES"),n.Wb(),n.Xb(6,"th"),n.Gc(7,"NO. EMPLEADO"),n.Wb(),n.Xb(8,"th"),n.Gc(9,"NOMBRE"),n.Wb(),n.Xb(10,"th"),n.Gc(11,"CORREO"),n.Wb(),n.Xb(12,"th"),n.Gc(13,"TIPO"),n.Wb(),n.Xb(14,"th"),n.Gc(15,"STATUS"),n.Wb(),n.Wb(),n.Wb(),n.Xb(16,"tbody"),n.Ec(17,I,17,12,"tr",49),n.Wb(),n.Wb(),n.Ec(18,k,2,1,"div",26),n.Wb()),2&o){const o=n.gc();n.Fb(17),n.nc("ngForOf",o.page.content),n.Fb(1),n.nc("ngIf",0==o.page.empty)}}function A(o,i){1&o&&n.Sb(0,"cybord-loader")}let R=(()=>{class o{constructor(o,i,e,n){this.datepipe=o,this.userService=i,this.downloadService=e,this.router=n,this.module="recursos-humanos",this.page=new t.a,this.pageSize="10",this.loading=!1,this.filterParams={email:"",estatus:"*",nombre:"",tipoUsuario:"*",page:"0",size:"10"}}ngOnInit(){this.module=this.router.url.split("/")[1],"recursos-humanos"===this.module&&(this.filterParams.tipoUsuario="INTERNO"),"contabilidad"===this.module&&(this.filterParams.tipoUsuario="EXTERNO"),this.updateDataTable(0,10)}updateDataTable(o,i,e){this.loading=!0,this.filterParams.page=o||0,this.filterParams.size=i||10,this.userService.getUsuarios(this.filterParams).subscribe(o=>{this.page=o,this.loading=!1})}onChangePageSize(o){this.updateDataTable(this.page.number,o)}redirectToUser(o){this.router.navigate([`../${this.module}/usuarios/${o}`])}redirectToAdjustment(o){this.router.navigate(["../contabilidad/ajustes/"+o])}redirectToSaldos(o){this.router.navigate([`../${this.module}/saldo-usuarios/${o}`])}downloadXLSFile(){this.loading=!0,this.filterParams.page="0",this.filterParams.size="100000",this.userService.getUsuariosReport(this.filterParams).subscribe(o=>{this.downloadService.downloadFile(o.dato,`ReporteUsuarios-${this.datepipe.transform(Date.now(),"yyyy-MM-dd")}.xls`,"application/vnd.ms-excel"),this.loading=!1})}}return o.\u0275fac=function(i){return new(i||o)(n.Rb(a.f),n.Rb(s.a),n.Rb(c.a),n.Rb(r.c))},o.\u0275cmp=n.Lb({type:o,selectors:[["cybord-usuarios"]],decls:53,vars:12,consts:[[1,"animated","fadeIn"],[1,"row"],[1,"col-sm-12","col-md-12"],[1,"card"],[1,"card-header"],[1,"card-body"],[1,"row","slide_1"],[1,"col-md-2"],["for","inputCorreo",1,"label"],["type","text","nbInput","","fullWidth","","id","inputCorreo","placeholder","email usuario",1,"form-control",3,"ngModel","disabled","ngModelChange"],[1,"col-md-3"],["for","nombreusuario",1,"label"],["type","text","nbInput","","fullWidth","","id","nombreusu","placeholder","nombre usuario",1,"form-control",3,"ngModel","disabled","ngModelChange"],["class","col-md-2",4,"ngIf"],[1,"col-md-5"],["for","inputActivo",1,"label"],[1,"row","form-inline"],["id","inputActivo","fullWidth","",1,"form-control",2,"display","block",3,"ngModel","ngModelChange"],["value","*"],["value","1"],["value","0"],[1,"btn","btn-primary",3,"disabled","click"],["class","fa fa-spinner fa-spin",4,"ngIf"],[1,"btn","btn-primary",3,"click"],[1,"col"],["class","alert alert-primary","role","alert",4,"ngIf"],["class","clearfix",4,"ngIf"],["class","table-responsive",4,"ngIf"],[4,"ngIf"],["for","tipoUsuario",1,"label"],["id","inputTipoUsuario","fullWidth","",1,"form-control",2,"display","block",3,"ngModel","ngModelChange"],["value","INTERNO"],["value","EXTERNO"],[1,"fa","fa-spinner","fa-spin"],["role","alert",1,"alert","alert-primary"],[1,"clearfix"],[1,"btn-sm","btn-success","float-right",3,"click"],[1,"fa","fa-file-excel-o","fa-sm"],["id","inputunidad","style","display:block;width: 95px; margin-right: 15px;","class","float-right form-control form-control-sm",3,"ngModel","ngModelChange","change",4,"ngIf"],[1,"float-right"],["id","inputunidad",1,"float-right","form-control","form-control-sm",2,"display","block","width","95px","margin-right","15px",3,"ngModel","ngModelChange","change"],["value","10"],["value","20",4,"ngIf"],["value","50",4,"ngIf"],["value","20"],["value","50"],[1,"table-responsive"],[1,"table","table-bordered","table-sm"],[1,"thead-dark"],[4,"ngFor","ngForOf"],["scope","row",1,"text-center"],[1,"btn-sm",3,"disabled","ngClass","click"],[1,"fa","fa-search","fa-sm"],["class","btn-sm btn-success",3,"click",4,"ngIf"],[1,"btn-sm","btn-success",3,"click"],[1,"fa","fa-bar-chart","fa-sm"],["scope","row",1,"text-right"],["scope","row"],["scope","row",4,"ngIf"],[1,"fa","fa-money","fa-sm"],[1,"badge","badge-success"],[1,"badge","badge-danger"],["class","pagination float-right",4,"ngIf"],[1,"pagination","float-right"],["class","page-item",4,"ngIf"],[1,"page-item","active"],[1,"page-link"],[1,"page-item"],[1,"btn","page-link",3,"click"],[1,"icon-control-rewind","icons"],[1,"icon-control-forward","icons"]],template:function(o,i){1&o&&(n.Xb(0,"div",0),n.Xb(1,"div",1),n.Xb(2,"div",2),n.Xb(3,"div",3),n.Xb(4,"div",4),n.Xb(5,"strong"),n.Gc(6,"Altas y bajas de usuarios - Filtros de busqueda"),n.Wb(),n.Wb(),n.Xb(7,"div",5),n.Xb(8,"div",6),n.Xb(9,"div",7),n.Xb(10,"label",8),n.Gc(11,"Correo Usuario"),n.Wb(),n.Xb(12,"input",9),n.ec("ngModelChange",(function(o){return i.filterParams.email=o})),n.Wb(),n.Wb(),n.Xb(13,"div",10),n.Xb(14,"label",11),n.Gc(15,"Nombre Usuario"),n.Wb(),n.Xb(16,"input",12),n.ec("ngModelChange",(function(o){return i.filterParams.nombre=o})),n.Wb(),n.Wb(),n.Ec(17,d,11,1,"div",13),n.Xb(18,"div",14),n.Xb(19,"label",15),n.Gc(20,"Estatus Usuario"),n.Wb(),n.Xb(21,"div",16),n.Xb(22,"select",17),n.ec("ngModelChange",(function(o){return i.filterParams.estatus=o})),n.Xb(23,"option",18),n.Gc(24,"TODOS"),n.Wb(),n.Xb(25,"option",19),n.Gc(26,"ACTIVO"),n.Wb(),n.Xb(27,"option",20),n.Gc(28,"INACTIVO"),n.Wb(),n.Wb(),n.Xb(29,"p"),n.Gc(30,"\xa0\xa0\xa0\xa0"),n.Wb(),n.Xb(31,"button",21),n.ec("click",(function(){return i.updateDataTable(0,10)})),n.Gc(32,"BUSCAR "),n.Ec(33,u,1,0,"i",22),n.Wb(),n.Xb(34,"p"),n.Gc(35,"\xa0\xa0\xa0\xa0"),n.Wb(),n.Xb(36,"button",23),n.ec("click",(function(){return i.redirectToUser("*")})),n.Gc(37,"NUEVO USUARIO"),n.Wb(),n.Wb(),n.Wb(),n.Wb(),n.Wb(),n.Wb(),n.Wb(),n.Wb(),n.Xb(38,"div",1),n.Xb(39,"div",2),n.Xb(40,"div",3),n.Xb(41,"div",4),n.Xb(42,"strong"),n.Gc(43,"Resultados"),n.Wb(),n.Wb(),n.Xb(44,"div",5),n.Xb(45,"div",1),n.Xb(46,"div",24),n.Ec(47,g,2,0,"div",25),n.Ec(48,p,6,1,"div",26),n.Wb(),n.Wb(),n.Xb(49,"div",1),n.Xb(50,"div",24),n.Ec(51,y,19,2,"div",27),n.Wb(),n.Wb(),n.Wb(),n.Ec(52,A,1,0,"cybord-loader",28),n.Wb(),n.Wb(),n.Wb(),n.Wb()),2&o&&(n.Fb(12),n.nc("ngModel",i.filterParams.email)("disabled",i.filterParams.nombre.length>0),n.Fb(4),n.nc("ngModel",i.filterParams.nombre)("disabled",i.filterParams.email.length>0),n.Fb(1),n.nc("ngIf","recursos-humanos"!=i.module),n.Fb(5),n.nc("ngModel",i.filterParams.estatus),n.Fb(9),n.nc("disabled",i.loading),n.Fb(2),n.nc("ngIf",i.loading),n.Fb(14),n.nc("ngIf",!0===i.page.empty),n.Fb(1),n.nc("ngIf",!1===i.page.empty),n.Fb(3),n.nc("ngIf",0==i.page.empty),n.Fb(1),n.nc("ngIf",i.loading))},directives:[b.b,b.h,b.k,a.n,b.o,b.l,b.p,a.m,a.l,l.a],styles:[""]}),o})()},qZ4S:function(o,i,e){"use strict";e.d(i,"a",(function(){return n}));var t=e("8Y7J");let n=(()=>{class o{constructor(){}validateSolicitud(o,i){const e=[];return"RetiroParcialAhorro"===o.tipo&&+o.atributos.MONTO>i&&e.push("No es posible solicitar un monto superior al total de su ahorro de $"+i),void 0===o.atributos.MONTO&&e.push("El monto de la solicitud no ha sido asignado"),"CancelacionAhorro"===o.tipo&&(void 0===o.atributos.RAZON_CANCELACION||o.atributos.RAZON_CANCELACION.length<10)&&e.push("La descripci\xf3n del motivo de cancelaci\xf3n es muy corto"),e}validarUsuario(o){const i=[],e=new RegExp("^([0-9a-zA-Z\xc0-\xfa.,&-_ ]+)$"),t=new RegExp("^([0-9]{8,20})$");return(!new RegExp("^[a-z0-9A-Z._%+-]+@[a-z0-9.-]+\\.[a-z]{2,4}$").test(o.email)||void 0===o.email)&&o.email.length<2&&o.email.length>100&&i.push("El email no es valido"),(!e.test(o.nombre)||void 0===o.nombre||o.nombre.length<2||o.nombre.length>100)&&i.push("El nombre no es valido"),void 0===o.noEmpleado&&i.push("El No. de empleado no ha sido asignado"),"*"!==o.datosUsuario.OFICINA&&void 0!==o.datosUsuario.OFICINA||i.push("La oficina no ha sido asignado"),"*"!==o.datosUsuario.BANCO&&void 0!==o.datosUsuario.BANCO||i.push("El banco no ha sido asignado"),"*"!==o.datosUsuario.TIPO_CUENTA&&void 0!==o.datosUsuario.TIPO_CUENTA||i.push("El tipo de cuenta no esta definido"),t.test(o.datosUsuario.CUENTA)||i.push("El no. de cuenta es invalido"),Number(o.datosUsuario.SUELDO)<100&&i.push("El saldo no es valido (MENOR A 100)"),i}}return o.\u0275fac=function(i){return new(i||o)},o.\u0275prov=t.Nb({token:o,factory:o.\u0275fac,providedIn:"root"}),o})()},uwdg:function(o,i,e){"use strict";e.d(i,"a",(function(){return F}));var t=e("mrSG");class n{constructor(o,i,e){this.tipoDato=o,this.dato=i,this.relevancia=e||0}}var a=e("KZhB");class s{constructor(o){this.nombre=o}}var c=e("8Y7J"),r=e("SVse"),b=e("iInd"),l=e("4ujS"),d=e("ESM5"),u=e("qZ4S"),g=e("s7LF"),h=e("ienR"),f=e("LqlI"),m=e("jksu");const p=["modalConfirmacion"];function X(o,i){if(1&o&&(c.Xb(0,"p"),c.Gc(1),c.Wb()),2&o){const o=i.$implicit;c.Fb(1),c.Hc(o)}}function v(o,i){if(1&o&&(c.Xb(0,"div",74),c.Ec(1,X,2,1,"p",75),c.Wb()),2&o){const o=c.gc();c.Fb(1),c.nc("ngForOf",o.errorMessages)}}function W(o,i){if(1&o&&(c.Xb(0,"option",76),c.Gc(1),c.Wb()),2&o){const o=i.$implicit;c.nc("value",o.nombre),c.Fb(1),c.Hc(o.valor)}}function E(o,i){if(1&o&&(c.Xb(0,"option",76),c.Gc(1),c.Wb()),2&o){const o=i.$implicit;c.nc("value",o.nombre),c.Fb(1),c.Hc(o.valor)}}function I(o,i){if(1&o&&(c.Xb(0,"option",76),c.Gc(1),c.Wb()),2&o){const o=i.$implicit;c.nc("value",o.nombre),c.Fb(1),c.Hc(o.valor)}}function M(o,i){if(1&o&&(c.Xb(0,"p",77),c.Gc(1),c.Wb()),2&o){const o=c.gc();c.Fb(1),c.Hc(o.params.success)}}function C(o,i){1&o&&c.Sb(0,"cybord-loader")}function N(o,i){1&o&&c.Sb(0,"i",80)}function U(o,i){if(1&o){const o=c.Yb();c.Xb(0,"button",78),c.ec("click",(function(){return c.yc(o),c.gc().openModal()})),c.Gc(1," Registrar "),c.Ec(2,N,1,0,"i",79),c.Wb()}if(2&o){const o=c.gc();c.nc("disabled",o.loading),c.Fb(2),c.nc("ngIf",o.loading)}}function O(o,i){1&o&&c.Sb(0,"i",80)}function k(o,i){if(1&o){const o=c.Yb();c.Xb(0,"button",78),c.ec("click",(function(){return c.yc(o),c.gc().openModal()})),c.Gc(1," Actualizar "),c.Ec(2,O,1,0,"i",79),c.Wb()}if(2&o){const o=c.gc();c.nc("disabled",o.loading),c.Fb(2),c.nc("ngIf",o.loading)}}function y(o,i){if(1&o){const o=c.Yb();c.Xb(0,"button",81),c.ec("click",(function(){return c.yc(o),c.gc().update()})),c.Gc(1,"Si"),c.Wb()}}function A(o,i){if(1&o){const o=c.Yb();c.Xb(0,"button",81),c.ec("click",(function(){return c.yc(o),c.gc().register()})),c.Gc(1,"Si"),c.Wb()}}const R=function(){return{dateInputFormat:"DD/MM/YYYY"}};let F=(()=>{class o{constructor(o,i,e,t,n,s){this.datepipe=o,this.route=i,this.catService=e,this.usuarioServicio=t,this.router=n,this.validationService=s,this.submitted=!1,this.loading=!1,this.usuario=new a.a,this.errorMessages=[],this.mensajeModal="",this.params={success:"",message:"",id:"*",module:"usuarios",interno:!1},this.oficinas=[],this.bancos=[],this.cuentas=[],this.roles={USUARIO:!0,RECURSOS_HUMANOS:!1,TESORERIA:!1,CONTABILIDAD:!1,GERENCIA_INTERNA:!1,GERENCIA_EXTERNA:!1,ADMINISTRACION:!1,DIRECCION:!1},this.nombreRoles=Object.keys(this.roles)}ngOnInit(){this.maxDate=new Date,this.loading=!0,this.errorMessages=[],this.params.module=this.router.url.split("/")[1],this.antiguedad=new Date,this.catService.getCatalogosByTipo("oficinas").subscribe(o=>this.oficinas=o),this.catService.getCatalogosByTipo("bancos").subscribe(o=>this.bancos=o),this.catService.getCatalogosByTipo("tipo-cuenta").subscribe(o=>this.cuentas=o),this.route.paramMap.subscribe(o=>{const i=o.get("idUsuario");"*"!==i?(this.updateUserInfo(+i),this.loading=!1):(this.antiguedad=new Date,this.loading=!1)})}updateUserInfo(o){return Object(t.a)(this,void 0,void 0,(function*(){try{this.usuario=yield this.usuarioServicio.getUsuario(o).toPromise(),this.antiguedad=new Date(this.usuario.datosUsuario.ANTIGUEDAD);for(const o of this.usuario.roles)this.roles[o]=!0}catch(i){this.loading=!1,this.errorMessages.push(i)}}))}toggleUserType(){this.usuario.tipoUsuario="INTERNO"===this.usuario.tipoUsuario?"EXTERNO":"INTERNO"}openModal(){this.mensajeModal=void 0!==this.usuario.id?"\xbfActualizar usuario?":"\xbfRegistrar usuario?",this.modalConfirmacion.show()}decline(){this.modalConfirmacion.hide()}update(){this.errorMessages=[],this.loading=!0,this.modalConfirmacion.hide(),this.errorMessages=this.validationService.validarUsuario(this.usuario),this.errorMessages.length>0?this.loading=!1:this.usuarioServicio.actualizaUser(this.usuario).toPromise().then(o=>Object(t.a)(this,void 0,void 0,(function*(){void 0!==this.usuario.datosUsuario.ANTIGUEDAD&&(this.usuario.datosUsuario.ANTIGUEDAD=this.datepipe.transform(this.antiguedad,"yyyy-MM-dd"));for(const e in this.usuario.datosUsuario)if(void 0!==e&&void 0!==this.usuario.datosUsuario[e]&&""!==this.usuario.datosUsuario[e]&&null!==this.usuario.datosUsuario[e]&&o.datosUsuario[e]!==this.usuario.datosUsuario[e]){const o=new n(e,this.usuario.datosUsuario[e]);yield this.usuarioServicio.actualizaDatoUsuario(this.usuario.id,e,o).toPromise()}if("administracion"===this.params.module){console.log("Updating user roles");var i=0;for(const o in this.roles)!1===this.roles[o]&&this.usuario.roles.find(i=>i===o)&&(yield this.usuarioServicio.deleteRoles(this.usuario.id,this.nombreRoles[i]).toPromise()),i++;for(const o in this.roles)!0!==this.roles[o]||this.usuario.roles.find(i=>i===o)||(yield this.usuarioServicio.insertarRoles(this.usuario.id,new s(o)).toPromise())}this.submitted=!0,this.params.success="El usuario ha sido actualizado satisfactoriamente."}))).then(()=>this.router.navigate([`../${this.params.module}/usuarios`])).catch(o=>{this.errorMessages.push(o),this.loading=!1})}register(){this.errorMessages=[];let o=0;this.loading=!0,this.modalConfirmacion.hide(),this.errorMessages=this.validationService.validarUsuario(this.usuario),this.errorMessages.length>0&&(this.loading=!1),console.log("registering"),this.usuario.datosUsuario.ANTIGUEDAD=this.datepipe.transform(this.antiguedad,"yyyy-MM-dd"),this.usuarioServicio.insertarUsuario(this.usuario).toPromise().then(i=>Object(t.a)(this,void 0,void 0,(function*(){o=i.id;for(const o in this.usuario.datosUsuario)if(void 0!==o&&void 0!==this.usuario.datosUsuario[o]){const e=this.usuario.datosUsuario[o];yield this.usuarioServicio.insertarDatoUsuario(i.id,new n(o,e)).toPromise()}for(const o in this.roles)!0===this.roles[o]&&(yield this.usuarioServicio.insertarRoles(i.id,new s(o)).toPromise());this.submitted=!0}))).then(()=>this.router.navigate([`../${this.params.module}/usuarios`])).catch(o=>{this.errorMessages.push(o),this.loading=!1})}updateRoles(){return Object(t.a)(this,void 0,void 0,(function*(){for(const o in this.roles)!1===this.roles[o]&&this.usuario.roles.find(i=>i===o)&&(yield this.usuarioServicio.deleteRoles(this.usuario.id,this.roles[o]).toPromise());for(const o in this.roles)!0!==this.roles[o]||this.usuario.roles.find(i=>i===o)||(yield this.usuarioServicio.insertarRoles(this.usuario.id,new s(o)).toPromise())}))}clearInput(){this.usuario=new a.a,this.params.success="",this.errorMessages=[],this.submitted=!1}}return o.\u0275fac=function(i){return new(i||o)(c.Rb(r.f),c.Rb(b.a),c.Rb(l.a),c.Rb(d.a),c.Rb(b.c),c.Rb(u.a))},o.\u0275cmp=c.Lb({type:o,selectors:[["cybord-usuario"]],viewQuery:function(o,i){var e;1&o&&c.Lc(p,!0),2&o&&c.uc(e=c.fc())&&(i.modalConfirmacion=e.first)},decls:160,vars:44,consts:[[1,"animated","fadeIn"],[1,"row"],[1,"col-sm-12","col-md-12"],[1,"card"],[1,"card-header"],[1,"card-body"],["class","alert alert-warning","role","alert",4,"ngIf"],[1,"col-xs-12","col-sm-12","col-md-8"],[1,"form-group","row"],[1,"col-md-3","col-form-label"],[1,"col-md-9"],["type","text","placeholder","Sobrenombre o alias",1,"form-control",3,"ngModel","ngModelChange"],["type","text","placeholder","Correo Electronico",1,"form-control",3,"ngModel","ngModelChange"],[1,"col-md-7"],[1,"switch","switch-label","switch-primary"],["type","checkbox",1,"switch-input",3,"checked","ngModel","ngModelChange"],["data-checked","ON","data-unchecked","OFF",1,"switch-slider"],[1,"col-md-7","col-form-label"],[1,"form-check"],["type","radio","name","tipo","id","radio3","value","INTERNO",1,"form-check-input",3,"checked","click"],["for","radio3",1,"form-check-label"],["type","radio","name","tipo","id","radio4","value","EXTERNO",1,"form-check-input",3,"checked","click"],["for","radio4",1,"form-check-label"],["type","text","id","no-emp","name","text-inputa","maxlength","10","placeholder","No empleado",1,"form-control",3,"ngModel","ngModelChange"],["id","office","name","office",1,"form-control",3,"ngModel","ngModelChange"],["value","*"],[3,"value",4,"ngFor","ngForOf"],["id","bank","name","bank",1,"form-control",3,"ngModel","ngModelChange"],["id","account","name","account",1,"form-control",3,"ngModel","ngModelChange"],["type","text","id","no-account","name","account","maxlength","20","minlength","8","placeholder","0000 0000 0000 0000",1,"form-control",3,"ngModel","ngModelChange"],["type","number","id","quantity","name","text-inputafg","min","1","placeholder","1.00",1,"form-control",3,"ngModel","ngModelChange"],["id","start-date","type","text","bsDatepicker","",1,"form-control",3,"maxDate","bsValue","bsConfig","maxDateChange","bsValueChange"],["dp","bsDatepicker"],["id","noAvles","name","noAvles",1,"form-control",3,"ngModel","ngModelChange"],["value","1"],["value","2"],["value","3"],["value","4"],[1,"col-xs-12","col-sm-12","col-md-4"],[1,"col-md-9","col-form-label"],["type","checkbox","value","option1","id","checkbox1",1,"form-check-input",3,"ngModel","disabled","ngModelChange"],["for","checkbox1",1,"form-check-label"],["type","checkbox","value","option1","id","checkbox2",1,"form-check-input",3,"ngModel","disabled","ngModelChange"],["for","checkbox2",1,"form-check-label"],[1,"form-check","checkbox"],["type","checkbox","value","option1","id","checkbox3",1,"form-check-input",3,"ngModel","disabled","ngModelChange"],["for","checkbox3",1,"form-check-label"],["type","checkbox","value","option1","id","checkbox4",1,"form-check-input",3,"ngModel","disabled","ngModelChange"],["for","checkbox4",1,"form-check-label"],["type","checkbox","value","option1","id","checkbox5",1,"form-check-input",3,"ngModel","disabled","ngModelChange"],["for","checkbox5",1,"form-check-label"],["type","checkbox","value","option1","id","checkbox8",1,"form-check-input",3,"ngModel","disabled","ngModelChange"],["for","checkbox8",1,"form-check-label"],["type","checkbox","value","option1","id","checkbox7",1,"form-check-input",3,"ngModel","disabled","ngModelChange"],["for","checkbox7",1,"form-check-label"],["type","checkbox","value","option1","id","checkbox6",1,"form-check-input",3,"ngModel","disabled","ngModelChange"],["for","checkbox6",1,"form-check-label"],["class","alert alert-success","role","alert",4,"ngIf"],[4,"ngIf"],[1,"card-footer"],[1,"float-right","slide_2"],["class","btn btn-primary",3,"disabled","click",4,"ngIf"],["bsModal","","id","modalConfirmacion","tabindex","-1","role","dialog","aria-labelledby","modalConfirmacion","aria-hidden","true",1,"modal","fade"],["modalConfirmacion","bs-modal"],["role","document",1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],["id","modalConfirmacionLabel",1,"modal-title"],["type","button","data-dismiss","modal","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"modal-footer"],["type","button","class","btn btn-primary",3,"click",4,"ngIf"],["type","button",1,"btn","btn-secondary",3,"click"],["role","alert",1,"alert","alert-warning"],[4,"ngFor","ngForOf"],[3,"value"],["role","alert",1,"alert","alert-success"],[1,"btn","btn-primary",3,"disabled","click"],["class","fa fa-spinner fa-spin",4,"ngIf"],[1,"fa","fa-spinner","fa-spin"],["type","button",1,"btn","btn-primary",3,"click"]],template:function(o,i){1&o&&(c.Xb(0,"div",0),c.Xb(1,"div",1),c.Xb(2,"div",2),c.Xb(3,"div",3),c.Xb(4,"div",4),c.Xb(5,"strong"),c.Gc(6,"Usuarios"),c.Wb(),c.Wb(),c.Xb(7,"div",5),c.Ec(8,v,2,1,"div",6),c.Xb(9,"div",1),c.Xb(10,"div",7),c.Xb(11,"div",8),c.Xb(12,"strong",9),c.Gc(13,"Nombre"),c.Wb(),c.Xb(14,"div",10),c.Xb(15,"input",11),c.ec("ngModelChange",(function(o){return i.usuario.nombre=o})),c.Wb(),c.Wb(),c.Wb(),c.Xb(16,"div",8),c.Xb(17,"strong",9),c.Gc(18,"Email"),c.Wb(),c.Xb(19,"div",10),c.Xb(20,"input",12),c.ec("ngModelChange",(function(o){return i.usuario.email=o})),c.Wb(),c.Wb(),c.Wb(),c.Xb(21,"div",8),c.Xb(22,"strong",9),c.Gc(23,"Usuario activo"),c.Wb(),c.Xb(24,"div",13),c.Xb(25,"label",14),c.Xb(26,"input",15),c.ec("ngModelChange",(function(o){return i.usuario.activo=o})),c.Wb(),c.Sb(27,"span",16),c.Wb(),c.Wb(),c.Wb(),c.Xb(28,"div",8),c.Xb(29,"strong",9),c.Gc(30,"Tipo Usuario"),c.Wb(),c.Xb(31,"div",17),c.Xb(32,"div",18),c.Xb(33,"input",19),c.ec("click",(function(){return i.toggleUserType()})),c.Wb(),c.Xb(34,"label",20),c.Gc(35," INTERNO "),c.Wb(),c.Wb(),c.Xb(36,"div",18),c.Xb(37,"input",21),c.ec("click",(function(){return i.toggleUserType()})),c.Wb(),c.Xb(38,"label",22),c.Gc(39," EXTERNO "),c.Wb(),c.Wb(),c.Wb(),c.Wb(),c.Xb(40,"div",8),c.Xb(41,"strong",9),c.Gc(42,"No. Empleado"),c.Wb(),c.Xb(43,"div",10),c.Xb(44,"input",23),c.ec("ngModelChange",(function(o){return i.usuario.noEmpleado=o})),c.Wb(),c.Wb(),c.Wb(),c.Xb(45,"div",8),c.Xb(46,"strong",9),c.Gc(47,"Oficina"),c.Wb(),c.Xb(48,"div",13),c.Xb(49,"select",24),c.ec("ngModelChange",(function(o){return i.usuario.datosUsuario.OFICINA=o})),c.Xb(50,"option",25),c.Gc(51,"Seleccionar"),c.Wb(),c.Ec(52,W,2,2,"option",26),c.Wb(),c.Wb(),c.Wb(),c.Xb(53,"div",8),c.Xb(54,"strong",9),c.Gc(55,"BANCO"),c.Wb(),c.Xb(56,"div",13),c.Xb(57,"select",27),c.ec("ngModelChange",(function(o){return i.usuario.datosUsuario.BANCO=o})),c.Xb(58,"option",25),c.Gc(59,"Seleccionar"),c.Wb(),c.Ec(60,E,2,2,"option",26),c.Wb(),c.Wb(),c.Wb(),c.Xb(61,"div",8),c.Xb(62,"strong",9),c.Gc(63,"TIPO CUENTA"),c.Wb(),c.Xb(64,"div",13),c.Xb(65,"select",28),c.ec("ngModelChange",(function(o){return i.usuario.datosUsuario.TIPO_CUENTA=o})),c.Xb(66,"option",25),c.Gc(67,"Seleccionar"),c.Wb(),c.Ec(68,I,2,2,"option",26),c.Wb(),c.Wb(),c.Wb(),c.Xb(69,"div",8),c.Xb(70,"strong",9),c.Gc(71,"No. Cuenta"),c.Wb(),c.Xb(72,"div",10),c.Xb(73,"input",29),c.ec("ngModelChange",(function(o){return i.usuario.datosUsuario.CUENTA=o})),c.Wb(),c.Wb(),c.Wb(),c.Xb(74,"div",8),c.Xb(75,"strong",9),c.Gc(76,"Sueldo"),c.Wb(),c.Xb(77,"div",13),c.Xb(78,"input",30),c.ec("ngModelChange",(function(o){return i.usuario.datosUsuario.SUELDO=o})),c.Wb(),c.Wb(),c.Wb(),c.Xb(79,"div",8),c.Xb(80,"strong",9),c.Gc(81,"Fecha Antiguedad"),c.Wb(),c.Xb(82,"div",13),c.Xb(83,"input",31,32),c.ec("maxDateChange",(function(o){return i.maxDate=o}))("bsValueChange",(function(o){return i.antiguedad=o})),c.Wb(),c.Wb(),c.Wb(),c.Xb(85,"div",8),c.Xb(86,"strong",9),c.Gc(87,"Maximo No. avales"),c.Wb(),c.Xb(88,"div",13),c.Xb(89,"select",33),c.ec("ngModelChange",(function(o){return i.usuario.datosUsuario.NO_AVALES=o})),c.Xb(90,"option",34),c.Gc(91,"1 avales"),c.Wb(),c.Xb(92,"option",35),c.Gc(93,"2 avales"),c.Wb(),c.Xb(94,"option",36),c.Gc(95,"3 avales"),c.Wb(),c.Xb(96,"option",37),c.Gc(97,"4 avales"),c.Wb(),c.Wb(),c.Wb(),c.Wb(),c.Wb(),c.Xb(98,"div",38),c.Xb(99,"div",8),c.Xb(100,"label",9),c.Xb(101,"strong"),c.Gc(102,"Roles"),c.Wb(),c.Wb(),c.Xb(103,"div",39),c.Xb(104,"div",18),c.Xb(105,"input",40),c.ec("ngModelChange",(function(o){return i.roles.USUARIO=o})),c.Wb(),c.Xb(106,"label",41),c.Gc(107," USUARIO "),c.Wb(),c.Wb(),c.Xb(108,"div",18),c.Xb(109,"input",42),c.ec("ngModelChange",(function(o){return i.roles.RECURSOS_HUMANOS=o})),c.Wb(),c.Xb(110,"label",43),c.Gc(111," RECURSOS HUMANOS "),c.Wb(),c.Wb(),c.Xb(112,"div",44),c.Xb(113,"input",45),c.ec("ngModelChange",(function(o){return i.roles.CONTABILIDAD=o})),c.Wb(),c.Xb(114,"label",46),c.Gc(115," CONTABILIDAD "),c.Wb(),c.Wb(),c.Xb(116,"div",44),c.Xb(117,"input",47),c.ec("ngModelChange",(function(o){return i.roles.TESORERIA=o})),c.Wb(),c.Xb(118,"label",48),c.Gc(119," TESORERIA "),c.Wb(),c.Wb(),c.Xb(120,"div",44),c.Xb(121,"input",49),c.ec("ngModelChange",(function(o){return i.roles.GERENCIA_INTERNA=o})),c.Wb(),c.Xb(122,"label",50),c.Gc(123," GERENCIA INTERNA "),c.Wb(),c.Wb(),c.Xb(124,"div",44),c.Xb(125,"input",51),c.ec("ngModelChange",(function(o){return i.roles.GERENCIA_EXTERNA=o})),c.Wb(),c.Xb(126,"label",52),c.Gc(127," GERENCIA EXTERNA "),c.Wb(),c.Wb(),c.Xb(128,"div",44),c.Xb(129,"input",53),c.ec("ngModelChange",(function(o){return i.roles.DIRECCION=o})),c.Wb(),c.Xb(130,"label",54),c.Gc(131," DIRECCION "),c.Wb(),c.Wb(),c.Xb(132,"div",44),c.Xb(133,"input",55),c.ec("ngModelChange",(function(o){return i.roles.ADMINISTRACION=o})),c.Wb(),c.Xb(134,"label",56),c.Gc(135," ADMINISTRACION "),c.Wb(),c.Wb(),c.Wb(),c.Wb(),c.Wb(),c.Wb(),c.Sb(136,"br"),c.Ec(137,M,2,1,"p",57),c.Wb(),c.Ec(138,C,1,0,"cybord-loader",58),c.Xb(139,"div",59),c.Xb(140,"div",60),c.Ec(141,U,3,2,"button",61),c.Ec(142,k,3,2,"button",61),c.Wb(),c.Wb(),c.Wb(),c.Wb(),c.Wb(),c.Wb(),c.Xb(143,"div",62,63),c.Xb(145,"div",64),c.Xb(146,"div",65),c.Xb(147,"div",66),c.Xb(148,"h5",67),c.Gc(149,"Confirmacion"),c.Wb(),c.Xb(150,"button",68),c.ec("click",(function(){return i.decline()})),c.Xb(151,"span",69),c.Gc(152,"\xd7"),c.Wb(),c.Wb(),c.Wb(),c.Xb(153,"div",70),c.Gc(154),c.Wb(),c.Xb(155,"div",71),c.Ec(156,y,2,0,"button",72),c.Ec(157,A,2,0,"button",72),c.Xb(158,"button",73),c.ec("click",(function(){return i.decline()})),c.Gc(159,"no"),c.Wb(),c.Wb(),c.Wb(),c.Wb(),c.Wb()),2&o&&(c.Fb(8),c.nc("ngIf",i.errorMessages.length>0),c.Fb(7),c.nc("ngModel",i.usuario.nombre),c.Fb(5),c.nc("ngModel",i.usuario.email),c.Fb(6),c.nc("checked",i.usuario.activo)("ngModel",i.usuario.activo),c.Fb(7),c.nc("checked","INTERNO"===i.usuario.tipoUsuario),c.Fb(4),c.nc("checked","EXTERNO"===i.usuario.tipoUsuario),c.Fb(7),c.nc("ngModel",i.usuario.noEmpleado),c.Fb(5),c.nc("ngModel",i.usuario.datosUsuario.OFICINA),c.Fb(3),c.nc("ngForOf",i.oficinas),c.Fb(5),c.nc("ngModel",i.usuario.datosUsuario.BANCO),c.Fb(3),c.nc("ngForOf",i.bancos),c.Fb(5),c.nc("ngModel",i.usuario.datosUsuario.TIPO_CUENTA),c.Fb(3),c.nc("ngForOf",i.cuentas),c.Fb(5),c.nc("ngModel",i.usuario.datosUsuario.CUENTA),c.Fb(5),c.nc("ngModel",i.usuario.datosUsuario.SUELDO),c.Fb(5),c.nc("maxDate",i.maxDate)("bsValue",i.antiguedad)("bsConfig",c.pc(43,R)),c.Fb(6),c.nc("ngModel",i.usuario.datosUsuario.NO_AVALES),c.Fb(16),c.nc("ngModel",i.roles.USUARIO)("disabled","administracion"!==i.params.module),c.Fb(4),c.nc("ngModel",i.roles.RECURSOS_HUMANOS)("disabled","administracion"!==i.params.module),c.Fb(4),c.nc("ngModel",i.roles.CONTABILIDAD)("disabled","administracion"!==i.params.module),c.Fb(4),c.nc("ngModel",i.roles.TESORERIA)("disabled","administracion"!==i.params.module),c.Fb(4),c.nc("ngModel",i.roles.GERENCIA_INTERNA)("disabled","administracion"!==i.params.module),c.Fb(4),c.nc("ngModel",i.roles.GERENCIA_EXTERNA)("disabled","administracion"!==i.params.module),c.Fb(4),c.nc("ngModel",i.roles.DIRECCION)("disabled","administracion"!==i.params.module),c.Fb(4),c.nc("ngModel",i.roles.ADMINISTRACION)("disabled","administracion"!==i.params.module),c.Fb(4),c.nc("ngIf",i.params.success.length>0),c.Fb(1),c.nc("ngIf",i.loading),c.Fb(3),c.nc("ngIf",void 0===i.usuario.id),c.Fb(1),c.nc("ngIf",void 0!==i.usuario.id),c.Fb(12),c.Ic(" ",i.mensajeModal," "),c.Fb(2),c.nc("ngIf",void 0!==i.usuario.id),c.Fb(1),c.nc("ngIf",void 0===i.usuario.id))},directives:[r.n,g.b,g.h,g.k,g.a,g.d,g.o,g.l,g.p,r.m,g.e,g.m,h.b,h.a,f.a,m.a],styles:[""]}),o})()}}]);